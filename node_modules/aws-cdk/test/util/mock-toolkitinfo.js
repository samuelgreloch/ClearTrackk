"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MockToolkitInfo = void 0;
/* eslint-disable import/order */
const api_1 = require("../../lib/api");
class MockToolkitInfo extends api_1.ToolkitInfo {
    static setup(toolkitInfo) {
        toolkitInfo = toolkitInfo ?? new MockToolkitInfo();
        const orig = api_1.ToolkitInfo.lookup;
        api_1.ToolkitInfo.lookup = jest.fn().mockResolvedValue(toolkitInfo);
        return {
            toolkitInfo,
            dispose: () => {
                api_1.ToolkitInfo.lookup = orig;
            },
        };
    }
    constructor(props = {}) {
        super();
        this.found = true;
        this.stackName = 'MockBootstrapStack';
        this.bucketName = props.bucketName ?? 'MockToolkitBucketName';
        this.bucketUrl = props.bucketUrl ?? `https://${this.bucketName}.s3.amazonaws.com/`;
        this.repositoryName = props.repositoryName ?? 'MockToolkitRepositoryName';
        this.version = props.version ?? 1;
        this.variant = api_1.DEFAULT_BOOTSTRAP_VARIANT;
        this._bootstrapStack = props.bootstrapStack;
    }
    get bootstrapStack() {
        if (!this._bootstrapStack) {
            throw new Error('Bootstrap stack object expected but not supplied to MockToolkitInfo');
        }
        return this._bootstrapStack;
    }
}
exports.MockToolkitInfo = MockToolkitInfo;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9jay10b29sa2l0aW5mby5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1vY2stdG9vbGtpdGluZm8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsaUNBQWlDO0FBQ2pDLHVDQUF1RTtBQVd2RSxNQUFhLGVBQWdCLFNBQVEsaUJBQVc7SUFDdkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUF5QjtRQUMzQyxXQUFXLEdBQUcsV0FBVyxJQUFJLElBQUksZUFBZSxFQUFFLENBQUM7UUFDbkQsTUFBTSxJQUFJLEdBQUcsaUJBQVcsQ0FBQyxNQUFNLENBQUM7UUFDaEMsaUJBQVcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRTlELE9BQU87WUFDTCxXQUFXO1lBQ1gsT0FBTyxFQUFFLEdBQUcsRUFBRTtnQkFDWixpQkFBVyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDNUIsQ0FBQztTQUNGLENBQUM7SUFDSixDQUFDO0lBWUQsWUFBWSxRQUE4QixFQUFFO1FBQzFDLEtBQUssRUFBRSxDQUFDO1FBWE0sVUFBSyxHQUFHLElBQUksQ0FBQztRQU1iLGNBQVMsR0FBRyxvQkFBb0IsQ0FBQztRQU8vQyxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLElBQUksdUJBQXVCLENBQUM7UUFDOUQsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsU0FBUyxJQUFJLFdBQVcsSUFBSSxDQUFDLFVBQVUsb0JBQW9CLENBQUM7UUFDbkYsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsY0FBYyxJQUFJLDJCQUEyQixDQUFDO1FBQzFFLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRywrQkFBeUIsQ0FBQztRQUN6QyxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUM7SUFDOUMsQ0FBQztJQUVELElBQVcsY0FBYztRQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMscUVBQXFFLENBQUMsQ0FBQztRQUN6RixDQUFDO1FBQ0QsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO0lBQzlCLENBQUM7Q0FDRjtBQXpDRCwwQ0F5Q0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvb3JkZXIgKi9cbmltcG9ydCB7IFRvb2xraXRJbmZvLCBERUZBVUxUX0JPT1RTVFJBUF9WQVJJQU5UIH0gZnJvbSAnLi4vLi4vbGliL2FwaSc7XG5pbXBvcnQgeyBDbG91ZEZvcm1hdGlvblN0YWNrIH0gZnJvbSAnLi4vLi4vbGliL2FwaS9kZXBsb3ltZW50cyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9ja1Rvb2xraXRJbmZvUHJvcHMge1xuICByZWFkb25seSBidWNrZXROYW1lPzogc3RyaW5nO1xuICByZWFkb25seSBidWNrZXRVcmw/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IHJlcG9zaXRvcnlOYW1lPzogc3RyaW5nO1xuICByZWFkb25seSB2ZXJzaW9uPzogbnVtYmVyO1xuICByZWFkb25seSBib290c3RyYXBTdGFjaz86IENsb3VkRm9ybWF0aW9uU3RhY2s7XG59XG5cbmV4cG9ydCBjbGFzcyBNb2NrVG9vbGtpdEluZm8gZXh0ZW5kcyBUb29sa2l0SW5mbyB7XG4gIHB1YmxpYyBzdGF0aWMgc2V0dXAodG9vbGtpdEluZm8/OiBUb29sa2l0SW5mbykge1xuICAgIHRvb2xraXRJbmZvID0gdG9vbGtpdEluZm8gPz8gbmV3IE1vY2tUb29sa2l0SW5mbygpO1xuICAgIGNvbnN0IG9yaWcgPSBUb29sa2l0SW5mby5sb29rdXA7XG4gICAgVG9vbGtpdEluZm8ubG9va3VwID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRvb2xraXRJbmZvKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b29sa2l0SW5mbyxcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgVG9vbGtpdEluZm8ubG9va3VwID0gb3JpZztcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBmb3VuZCA9IHRydWU7XG4gIHB1YmxpYyByZWFkb25seSBidWNrZXRVcmw6IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IGJ1Y2tldE5hbWU6IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IHJlcG9zaXRvcnlOYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyByZWFkb25seSB2ZXJzaW9uOiBudW1iZXI7XG4gIHB1YmxpYyByZWFkb25seSB2YXJpYW50OiBzdHJpbmc7XG4gIHB1YmxpYyByZWFkb25seSBzdGFja05hbWUgPSAnTW9ja0Jvb3RzdHJhcFN0YWNrJztcblxuICBwcml2YXRlIHJlYWRvbmx5IF9ib290c3RyYXBTdGFjaz86IENsb3VkRm9ybWF0aW9uU3RhY2s7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IE1vY2tUb29sa2l0SW5mb1Byb3BzID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5idWNrZXROYW1lID0gcHJvcHMuYnVja2V0TmFtZSA/PyAnTW9ja1Rvb2xraXRCdWNrZXROYW1lJztcbiAgICB0aGlzLmJ1Y2tldFVybCA9IHByb3BzLmJ1Y2tldFVybCA/PyBgaHR0cHM6Ly8ke3RoaXMuYnVja2V0TmFtZX0uczMuYW1hem9uYXdzLmNvbS9gO1xuICAgIHRoaXMucmVwb3NpdG9yeU5hbWUgPSBwcm9wcy5yZXBvc2l0b3J5TmFtZSA/PyAnTW9ja1Rvb2xraXRSZXBvc2l0b3J5TmFtZSc7XG4gICAgdGhpcy52ZXJzaW9uID0gcHJvcHMudmVyc2lvbiA/PyAxO1xuICAgIHRoaXMudmFyaWFudCA9IERFRkFVTFRfQk9PVFNUUkFQX1ZBUklBTlQ7XG4gICAgdGhpcy5fYm9vdHN0cmFwU3RhY2sgPSBwcm9wcy5ib290c3RyYXBTdGFjaztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYm9vdHN0cmFwU3RhY2soKTogQ2xvdWRGb3JtYXRpb25TdGFjayB7XG4gICAgaWYgKCF0aGlzLl9ib290c3RyYXBTdGFjaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXAgc3RhY2sgb2JqZWN0IGV4cGVjdGVkIGJ1dCBub3Qgc3VwcGxpZWQgdG8gTW9ja1Rvb2xraXRJbmZvJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ib290c3RyYXBTdGFjaztcbiAgfVxufVxuIl19