"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const client_cloudformation_1 = require("@aws-sdk/client-cloudformation");
const deployments_1 = require("../../../lib/api/deployments");
const deploy_stack_1 = require("../../../lib/api/deployments/deploy-stack");
const hotswap_deployments_1 = require("../../../lib/api/deployments/hotswap-deployments");
const environment_resources_1 = require("../../../lib/api/environment-resources");
const common_1 = require("../../../lib/api/hotswap/common");
const cli_io_host_1 = require("../../../lib/toolkit/cli-io-host");
const util_1 = require("../../util");
const mock_sdk_1 = require("../../util/mock-sdk");
jest.mock('../../../lib/api/deployments/hotswap-deployments');
jest.mock('../../../lib/api/deployments/checks', () => ({
    determineAllowCrossAccountAssetPublishing: jest.fn().mockResolvedValue(true),
}));
const FAKE_STACK = (0, util_1.testStack)({
    stackName: 'withouterrors',
});
const FAKE_STACK_WITH_PARAMETERS = (0, util_1.testStack)({
    stackName: 'withparameters',
    template: {
        Parameters: {
            HasValue: { Type: 'String' },
            HasDefault: { Type: 'String', Default: 'TheDefault' },
            OtherParameter: { Type: 'String' },
        },
    },
});
const FAKE_STACK_TERMINATION_PROTECTION = (0, util_1.testStack)({
    stackName: 'termination-protection',
    template: util_1.DEFAULT_FAKE_TEMPLATE,
    terminationProtection: true,
});
const baseResponse = {
    StackName: 'mock-stack-name',
    StackId: 'mock-stack-id',
    CreationTime: new Date(),
    StackStatus: client_cloudformation_1.StackStatus.CREATE_COMPLETE,
    EnableTerminationProtection: false,
};
let sdk;
let sdkProvider;
beforeEach(() => {
    sdkProvider = new mock_sdk_1.MockSdkProvider();
    sdk = new mock_sdk_1.MockSdk();
    sdk.getUrlSuffix = () => Promise.resolve('amazonaws.com');
    jest.resetAllMocks();
    (0, mock_sdk_1.restoreSdkMocksToDefault)();
    mock_sdk_1.mockCloudFormationClient
        .on(client_cloudformation_1.DescribeStacksCommand)
        // First call, no stacks exis
        .resolvesOnce({
        Stacks: [],
    })
        // Second call, stack has been created
        .resolves({
        Stacks: [
            {
                StackStatus: client_cloudformation_1.StackStatus.CREATE_COMPLETE,
                StackStatusReason: 'It is magic',
                EnableTerminationProtection: false,
                StackName: 'MagicalStack',
                CreationTime: new Date(),
            },
        ],
    });
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeChangeSetCommand).resolves({
        Status: client_cloudformation_1.StackStatus.CREATE_COMPLETE,
        Changes: [],
    });
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.GetTemplateCommand).resolves({
        TemplateBody: JSON.stringify(util_1.DEFAULT_FAKE_TEMPLATE),
    });
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.UpdateTerminationProtectionCommand).resolves({
        StackId: 'stack-id',
    });
});
function standardDeployStackArguments() {
    const resolvedEnvironment = (0, mock_sdk_1.mockResolvedEnvironment)();
    return {
        stack: FAKE_STACK,
        sdk,
        sdkProvider,
        resolvedEnvironment,
        envResources: new environment_resources_1.NoBootstrapStackEnvironmentResources(resolvedEnvironment, sdk),
    };
}
test("calls tryHotswapDeployment() if 'hotswap' is `HotswapMode.CLASSIC`", async () => {
    // WHEN
    const spyOnSdk = jest.spyOn(sdk, 'appendCustomUserAgent');
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        hotswap: common_1.HotswapMode.FALL_BACK,
        extraUserAgent: 'extra-user-agent',
    });
    // THEN
    expect(hotswap_deployments_1.tryHotswapDeployment).toHaveBeenCalled();
    // check that the extra User-Agent is honored
    expect(spyOnSdk).toHaveBeenCalledWith('extra-user-agent');
    // check that the fallback has been called if hotswapping failed
    expect(spyOnSdk).toHaveBeenCalledWith('cdk-hotswap/fallback');
});
test("calls tryHotswapDeployment() if 'hotswap' is `HotswapMode.HOTSWAP_ONLY`", async () => {
    // we need the first call to return something in the Stacks prop,
    // otherwise the access to `stackId` will fail
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [{ ...baseResponse }],
    });
    const spyOnSdk = jest.spyOn(sdk, 'appendCustomUserAgent');
    // WHEN
    const deployStackResult = await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        hotswap: common_1.HotswapMode.HOTSWAP_ONLY,
        extraUserAgent: 'extra-user-agent',
        force: true, // otherwise, deployment would be skipped
    });
    // THEN
    expect(deployStackResult.type === 'did-deploy-stack' && deployStackResult.noOp).toEqual(true);
    expect(hotswap_deployments_1.tryHotswapDeployment).toHaveBeenCalled();
    // check that the extra User-Agent is honored
    expect(spyOnSdk).toHaveBeenCalledWith('extra-user-agent');
    // check that the fallback has not been called if hotswapping failed
    expect(spyOnSdk).not.toHaveBeenCalledWith('cdk-hotswap/fallback');
});
test('correctly passes CFN parameters when hotswapping', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        hotswap: common_1.HotswapMode.FALL_BACK,
        parameters: {
            A: 'A-value',
            B: 'B=value',
            C: undefined,
            D: '',
        },
    });
    // THEN
    expect(hotswap_deployments_1.tryHotswapDeployment).toHaveBeenCalledWith(expect.anything(), { A: 'A-value', B: 'B=value' }, expect.anything(), expect.anything(), common_1.HotswapMode.FALL_BACK, expect.anything());
});
test('correctly passes SSM parameters when hotswapping', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Parameters: [{ ParameterKey: 'SomeParameter', ParameterValue: 'ParameterName', ResolvedValue: 'SomeValue' }],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: (0, util_1.testStack)({
            stackName: 'stack',
            template: {
                Parameters: {
                    SomeParameter: {
                        Type: 'AWS::SSM::Parameter::Value<String>',
                        Default: 'ParameterName',
                    },
                },
            },
        }),
        hotswap: common_1.HotswapMode.FALL_BACK,
        usePreviousParameters: true,
    });
    // THEN
    expect(hotswap_deployments_1.tryHotswapDeployment).toHaveBeenCalledWith(expect.anything(), { SomeParameter: 'SomeValue' }, expect.anything(), expect.anything(), common_1.HotswapMode.FALL_BACK, expect.anything());
});
test('call CreateStack when method=direct and the stack doesnt exist yet', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'direct' },
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateStackCommand);
});
test('call UpdateStack when method=direct and the stack exists already', async () => {
    // WHEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [{ ...baseResponse }],
    });
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'direct' },
        force: true,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.UpdateStackCommand);
});
test('method=direct and no updates to be performed', async () => {
    const error = new Error('No updates are to be performed.');
    error.name = 'ValidationError';
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.UpdateStackCommand).rejectsOnce(error);
    // WHEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [{ ...baseResponse }],
    });
    const ret = await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'direct' },
        force: true,
    });
    // THEN
    expect(ret).toEqual(expect.objectContaining({ noOp: true }));
});
test("does not call tryHotswapDeployment() if 'hotswap' is false", async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        hotswap: undefined,
    });
    // THEN
    expect(hotswap_deployments_1.tryHotswapDeployment).not.toHaveBeenCalled();
});
test("rollback still defaults to enabled even if 'hotswap' is enabled", async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        hotswap: common_1.HotswapMode.FALL_BACK,
        rollback: undefined,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommandWith(client_cloudformation_1.ExecuteChangeSetCommand, expect.objectContaining({
        DisableRollback: true,
    }));
});
test("rollback defaults to enabled if 'hotswap' is undefined", async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        hotswap: undefined,
        rollback: undefined,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandTimes(client_cloudformation_1.ExecuteChangeSetCommand, 1);
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommandWith(client_cloudformation_1.ExecuteChangeSetCommand, expect.objectContaining({
        DisableRollback: true,
    }));
});
test('do deploy executable change set with 0 changes', async () => {
    // WHEN
    const ret = await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(ret.type === 'did-deploy-stack' && ret.noOp).toBeFalsy();
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('correctly passes CFN parameters, ignoring ones with empty values', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        parameters: {
            A: 'A-value',
            B: 'B=value',
            C: undefined,
            D: '',
        },
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        Parameters: [
            { ParameterKey: 'A', ParameterValue: 'A-value' },
            { ParameterKey: 'B', ParameterValue: 'B=value' },
        ],
        TemplateBody: expect.any(String),
    });
});
test('reuse previous parameters if requested', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Parameters: [
                    { ParameterKey: 'HasValue', ParameterValue: 'TheValue' },
                    { ParameterKey: 'HasDefault', ParameterValue: 'TheOldValue' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK_WITH_PARAMETERS,
        parameters: {
            OtherParameter: 'SomeValue',
        },
        usePreviousParameters: true,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        Parameters: [
            { ParameterKey: 'HasValue', UsePreviousValue: true },
            { ParameterKey: 'HasDefault', UsePreviousValue: true },
            { ParameterKey: 'OtherParameter', ParameterValue: 'SomeValue' },
        ],
    });
});
describe('ci=true', () => {
    let stderrMock;
    let stdoutMock;
    beforeEach(() => {
        cli_io_host_1.CliIoHost.instance().isCI = true;
        jest.resetAllMocks();
        stderrMock = jest.spyOn(process.stderr, 'write').mockImplementation(() => {
            return true;
        });
        stdoutMock = jest.spyOn(process.stdout, 'write').mockImplementation(() => {
            return true;
        });
    });
    afterEach(() => {
        cli_io_host_1.CliIoHost.instance().isCI = false;
    });
    test('output written to stdout', async () => {
        // GIVEN
        await (0, deploy_stack_1.deployStack)({
            ...standardDeployStackArguments(),
        });
        // THEN
        expect(stderrMock.mock.calls).toEqual([]);
        expect(stdoutMock.mock.calls).not.toEqual([]);
    });
});
test('do not reuse previous parameters if not requested', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Parameters: [
                    { ParameterKey: 'HasValue', ParameterValue: 'TheValue' },
                    { ParameterKey: 'HasDefault', ParameterValue: 'TheOldValue' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK_WITH_PARAMETERS,
        parameters: {
            HasValue: 'SomeValue',
            OtherParameter: 'SomeValue',
        },
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        ChangeSetType: client_cloudformation_1.ChangeSetType.UPDATE,
        Parameters: [
            { ParameterKey: 'HasValue', ParameterValue: 'SomeValue' },
            { ParameterKey: 'OtherParameter', ParameterValue: 'SomeValue' },
        ],
    });
});
test('throw exception if not enough parameters supplied', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Parameters: [
                    { ParameterKey: 'HasValue', ParameterValue: 'TheValue' },
                    { ParameterKey: 'HasDefault', ParameterValue: 'TheOldValue' },
                ],
            },
        ],
    });
    // WHEN
    await expect((0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK_WITH_PARAMETERS,
        parameters: {
            OtherParameter: 'SomeValue',
        },
    })).rejects.toThrow(/CloudFormation Parameters are missing a value/);
});
test('deploy is skipped if template did not change', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('deploy is skipped if parameters are the same', async () => {
    // GIVEN
    givenTemplateIs(FAKE_STACK_WITH_PARAMETERS.template);
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Parameters: [
                    { ParameterKey: 'HasValue', ParameterValue: 'TheValue' },
                    { ParameterKey: 'HasDefault', ParameterValue: 'TheOldValue' },
                    { ParameterKey: 'OtherParameter', ParameterValue: 'OtherParameter' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK_WITH_PARAMETERS,
        parameters: {},
        usePreviousParameters: true,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
});
test('deploy is not skipped if parameters are different', async () => {
    // GIVEN
    givenTemplateIs(FAKE_STACK_WITH_PARAMETERS.template);
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Parameters: [
                    { ParameterKey: 'HasValue', ParameterValue: 'TheValue' },
                    { ParameterKey: 'HasDefault', ParameterValue: 'TheOldValue' },
                    { ParameterKey: 'OtherParameter', ParameterValue: 'OtherParameter' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK_WITH_PARAMETERS,
        parameters: {
            HasValue: 'NewValue',
        },
        usePreviousParameters: true,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        ChangeSetType: client_cloudformation_1.ChangeSetType.UPDATE,
        Parameters: [
            { ParameterKey: 'HasValue', ParameterValue: 'NewValue' },
            { ParameterKey: 'HasDefault', UsePreviousValue: true },
            { ParameterKey: 'OtherParameter', UsePreviousValue: true },
        ],
    });
});
test('deploy is skipped if notificationArns are the same', async () => {
    // GIVEN
    givenTemplateIs(FAKE_STACK.template);
    givenStackExists({
        NotificationARNs: ['arn:aws:sns:bermuda-triangle-1337:123456789012:TestTopic'],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK,
        notificationArns: ['arn:aws:sns:bermuda-triangle-1337:123456789012:TestTopic'],
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
});
test('deploy is not skipped if notificationArns are different', async () => {
    // GIVEN
    givenTemplateIs(FAKE_STACK.template);
    givenStackExists({
        NotificationARNs: ['arn:aws:sns:bermuda-triangle-1337:123456789012:TestTopic'],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK,
        notificationArns: ['arn:aws:sns:bermuda-triangle-1337:123456789012:MagicTopic'],
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
});
test('if existing stack failed to create, it is deleted and recreated', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient
        .on(client_cloudformation_1.DescribeStacksCommand)
        .resolvesOnce({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.ROLLBACK_COMPLETE,
            },
        ],
    })
        .resolvesOnce({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.DELETE_COMPLETE,
            },
        ],
    })
        .resolves({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.CREATE_COMPLETE,
            },
        ],
    });
    givenTemplateIs({
        DifferentThan: 'TheDefault',
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.DeleteStackCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        ChangeSetType: client_cloudformation_1.ChangeSetType.CREATE,
    });
});
test('if existing stack failed to create, it is deleted and recreated even if the template did not change', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient
        .on(client_cloudformation_1.DescribeStacksCommand)
        .resolvesOnce({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.ROLLBACK_COMPLETE,
            },
        ],
    })
        .resolvesOnce({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.DELETE_COMPLETE,
            },
        ],
    })
        .resolves({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.CREATE_COMPLETE,
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.DeleteStackCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        ChangeSetType: client_cloudformation_1.ChangeSetType.CREATE,
    });
});
test('deploy not skipped if template did not change and --force is applied', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [{ ...baseResponse }],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        force: true,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandTimes(client_cloudformation_1.ExecuteChangeSetCommand, 1);
});
test('deploy is skipped if template and tags did not change', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Tags: [
                    { Key: 'Key1', Value: 'Value1' },
                    { Key: 'Key2', Value: 'Value2' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        tags: [
            { Key: 'Key1', Value: 'Value1' },
            { Key: 'Key2', Value: 'Value2' },
        ],
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.DescribeStacksCommand, {
        StackName: 'withouterrors',
    });
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.GetTemplateCommand, {
        StackName: 'withouterrors',
        TemplateStage: 'Original',
    });
});
test('deploy not skipped if template did not change but tags changed', async () => {
    // GIVEN
    givenStackExists({
        Tags: [{ Key: 'Key', Value: 'Value' }],
    });
    // WHEN
    const resolvedEnvironment = (0, mock_sdk_1.mockResolvedEnvironment)();
    await (0, deploy_stack_1.deployStack)({
        stack: FAKE_STACK,
        sdk,
        sdkProvider,
        resolvedEnvironment,
        tags: [
            {
                Key: 'Key',
                Value: 'NewValue',
            },
        ],
        envResources: new environment_resources_1.NoBootstrapStackEnvironmentResources(resolvedEnvironment, sdk),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.DescribeChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.DescribeStacksCommand, {
        StackName: 'withouterrors',
    });
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.GetTemplateCommand, {
        StackName: 'withouterrors',
        TemplateStage: 'Original',
    });
});
test('deployStack reports no change if describeChangeSet returns specific error', async () => {
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeChangeSetCommand).resolvesOnce({
        Status: client_cloudformation_1.ChangeSetStatus.FAILED,
        StatusReason: 'No updates are to be performed.',
    });
    // WHEN
    const deployResult = await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(deployResult.type === 'did-deploy-stack' && deployResult.noOp).toEqual(true);
});
test('deploy not skipped if template did not change but one tag removed', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Tags: [
                    { Key: 'Key1', Value: 'Value1' },
                    { Key: 'Key2', Value: 'Value2' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        tags: [{ Key: 'Key1', Value: 'Value1' }],
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.DescribeChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.DescribeStacksCommand, {
        StackName: 'withouterrors',
    });
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.GetTemplateCommand, {
        StackName: 'withouterrors',
        TemplateStage: 'Original',
    });
});
test('deploy is not skipped if stack is in a _FAILED state', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.DELETE_FAILED,
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        usePreviousParameters: true,
    }).catch(() => { });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('existing stack in UPDATE_ROLLBACK_COMPLETE state can be updated', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient
        .on(client_cloudformation_1.DescribeStacksCommand)
        .resolvesOnce({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.UPDATE_ROLLBACK_COMPLETE,
            },
        ],
    })
        .resolves({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.UPDATE_COMPLETE,
            },
        ],
    });
    givenTemplateIs({ changed: 123 });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.DeleteStackCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        ChangeSetType: client_cloudformation_1.ChangeSetType.UPDATE,
    });
});
test('deploy not skipped if template changed', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [{ ...baseResponse }],
    });
    givenTemplateIs({ changed: 123 });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('not executed and no error if --no-execute is given', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'change-set', execute: false },
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('empty change set is deleted if --execute is given', async () => {
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeChangeSetCommand).resolvesOnce({
        Status: client_cloudformation_1.ChangeSetStatus.FAILED,
        StatusReason: 'No updates are to be performed.',
    });
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [{ ...baseResponse }],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'change-set', execute: true },
        force: true, // Necessary to bypass "skip deploy"
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
    //the first deletion is for any existing cdk change sets, the second is for the deleting the new empty change set
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandTimes(client_cloudformation_1.DeleteChangeSetCommand, 2);
});
test('empty change set is not deleted if --no-execute is given', async () => {
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeChangeSetCommand).resolvesOnce({
        Status: client_cloudformation_1.ChangeSetStatus.FAILED,
        StatusReason: 'No updates are to be performed.',
    });
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [{ ...baseResponse }],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'change-set', execute: false },
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.CreateChangeSetCommand);
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
    //the first deletion is for any existing cdk change sets
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandTimes(client_cloudformation_1.DeleteChangeSetCommand, 1);
});
test('use S3 url for stack deployment if present in Stack Artifact', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: (0, util_1.testStack)({
            stackName: 'withouterrors',
            properties: {
                stackTemplateAssetObjectUrl: 'https://use-me-use-me/',
            },
        }),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        TemplateURL: 'https://use-me-use-me/',
    });
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('use REST API S3 url with substituted placeholders if manifest url starts with s3://', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: (0, util_1.testStack)({
            stackName: 'withouterrors',
            properties: {
                stackTemplateAssetObjectUrl: 's3://use-me-use-me-${AWS::AccountId}/object',
            },
        }),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        TemplateURL: 'https://s3.bermuda-triangle-1337.amazonaws.com/use-me-use-me-123456789/object',
    });
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('changeset is created when stack exists in REVIEW_IN_PROGRESS status', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                StackStatus: client_cloudformation_1.StackStatus.REVIEW_IN_PROGRESS,
                Tags: [
                    { Key: 'Key1', Value: 'Value1' },
                    { Key: 'Key2', Value: 'Value2' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'change-set', execute: false },
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        ChangeSetType: client_cloudformation_1.ChangeSetType.CREATE,
        StackName: 'withouterrors',
    });
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('changeset is updated when stack exists in CREATE_COMPLETE status', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                Tags: [
                    { Key: 'Key1', Value: 'Value1' },
                    { Key: 'Key2', Value: 'Value2' },
                ],
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        deploymentMethod: { method: 'change-set', execute: false },
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
        ...expect.anything,
        ChangeSetType: client_cloudformation_1.ChangeSetType.UPDATE,
        StackName: 'withouterrors',
    });
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.ExecuteChangeSetCommand);
});
test('deploy with termination protection enabled', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK_TERMINATION_PROTECTION,
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.UpdateTerminationProtectionCommand, {
        StackName: 'termination-protection',
        EnableTerminationProtection: true,
    });
});
test('updateTerminationProtection not called when termination protection is undefined', async () => {
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommand(client_cloudformation_1.UpdateTerminationProtectionCommand);
});
test('updateTerminationProtection called when termination protection is undefined and stack has termination protection', async () => {
    // GIVEN
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand).resolves({
        Stacks: [
            {
                ...baseResponse,
                EnableTerminationProtection: true,
            },
        ],
    });
    // WHEN
    await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
    });
    // THEN
    expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.UpdateTerminationProtectionCommand, {
        StackName: 'withouterrors',
        EnableTerminationProtection: false,
    });
});
describe('disable rollback', () => {
    test('by default, we do not disable rollback (and also do not pass the flag)', async () => {
        // WHEN
        await (0, deploy_stack_1.deployStack)({
            ...standardDeployStackArguments(),
        });
        // THEN
        expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandTimes(client_cloudformation_1.ExecuteChangeSetCommand, 1);
        expect(mock_sdk_1.mockCloudFormationClient).not.toHaveReceivedCommandWith(client_cloudformation_1.ExecuteChangeSetCommand, {
            DisableRollback: expect.anything,
            ChangeSetName: expect.any(String),
        });
    });
    test('rollback can be disabled by setting rollback: false', async () => {
        // WHEN
        await (0, deploy_stack_1.deployStack)({
            ...standardDeployStackArguments(),
            rollback: false,
        });
        // THEN
        expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.ExecuteChangeSetCommand, {
            ...expect.anything,
            DisableRollback: true,
        });
    });
});
describe('import-existing-resources', () => {
    test('is disabled by default', async () => {
        // WHEN
        await (0, deploy_stack_1.deployStack)({
            ...standardDeployStackArguments(),
            deploymentMethod: {
                method: 'change-set',
            },
        });
        // THEN
        expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
            ...expect.anything,
            ImportExistingResources: false,
        });
    });
    test('is added to the CreateChangeSetCommandInput', async () => {
        // WHEN
        await (0, deploy_stack_1.deployStack)({
            ...standardDeployStackArguments(),
            deploymentMethod: {
                method: 'change-set',
                importExistingResources: true,
            },
        });
        // THEN
        expect(mock_sdk_1.mockCloudFormationClient).toHaveReceivedCommandWith(client_cloudformation_1.CreateChangeSetCommand, {
            ...expect.anything,
            ImportExistingResources: true,
        });
    });
});
test.each([
    // From a failed state, a --no-rollback is possible as long as there is not a replacement
    [client_cloudformation_1.StackStatus.UPDATE_FAILED, 'no-rollback', 'no-replacement', 'did-deploy-stack'],
    [client_cloudformation_1.StackStatus.UPDATE_FAILED, 'no-rollback', 'replacement', 'failpaused-need-rollback-first'],
    // Any combination of UPDATE_FAILED & rollback always requires a rollback first
    [client_cloudformation_1.StackStatus.UPDATE_FAILED, 'rollback', 'replacement', 'failpaused-need-rollback-first'],
    [client_cloudformation_1.StackStatus.UPDATE_FAILED, 'rollback', 'no-replacement', 'failpaused-need-rollback-first'],
    // From a stable state, any deployment containing a replacement requires a regular deployment (--rollback)
    [client_cloudformation_1.StackStatus.UPDATE_COMPLETE, 'no-rollback', 'replacement', 'replacement-requires-rollback'],
])('no-rollback and replacement is disadvised: %s %s %s -> %s', async (stackStatus, rollback, replacement, expectedType) => {
    // GIVEN
    givenTemplateIs(FAKE_STACK.template);
    givenStackExists({
        // First call
        StackStatus: stackStatus,
    }, {
        // Later calls
        StackStatus: 'UPDATE_COMPLETE',
    });
    givenChangeSetContainsReplacement(replacement === 'replacement');
    // WHEN
    const result = await (0, deploy_stack_1.deployStack)({
        ...standardDeployStackArguments(),
        stack: FAKE_STACK,
        rollback: rollback === 'rollback',
        force: true, // Bypass 'canSkipDeploy'
    });
    // THEN
    expect(result.type).toEqual(expectedType);
});
test('assertIsSuccessfulDeployStackResult does what it says', () => {
    expect(() => (0, deployments_1.assertIsSuccessfulDeployStackResult)({ type: 'replacement-requires-rollback' })).toThrow();
});
/**
 * Set up the mocks so that it looks like the stack exists to start with
 *
 * The last element of this array will be continuously repeated.
 */
function givenStackExists(...overrides) {
    if (overrides.length === 0) {
        overrides = [{}];
    }
    let handler = mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeStacksCommand);
    for (const override of overrides.slice(0, overrides.length - 1)) {
        handler = handler.resolvesOnce({
            Stacks: [{ ...baseResponse, ...override }],
        });
    }
    handler.resolves({
        Stacks: [{ ...baseResponse, ...overrides[overrides.length - 1] }],
    });
}
function givenTemplateIs(template) {
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.GetTemplateCommand).resolves({
        TemplateBody: JSON.stringify(template),
    });
}
function givenChangeSetContainsReplacement(replacement) {
    mock_sdk_1.mockCloudFormationClient.on(client_cloudformation_1.DescribeChangeSetCommand).resolves({
        Status: 'CREATE_COMPLETE',
        Changes: replacement ? [
            {
                Type: 'Resource',
                ResourceChange: {
                    PolicyAction: 'ReplaceAndDelete',
                    Action: 'Modify',
                    LogicalResourceId: 'Queue4A7E3555',
                    PhysicalResourceId: 'https://sqs.eu-west-1.amazonaws.com/111111111111/Queue4A7E3555-P9C8nK3uv8v6.fifo',
                    ResourceType: 'AWS::SQS::Queue',
                    Replacement: 'True',
                    Scope: ['Properties'],
                    Details: [
                        {
                            Target: {
                                Attribute: 'Properties',
                                Name: 'FifoQueue',
                                RequiresRecreation: 'Always',
                            },
                            Evaluation: 'Static',
                            ChangeSource: 'DirectModification',
                        },
                    ],
                },
            },
        ] : [],
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwbG95LXN0YWNrLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkZXBsb3ktc3RhY2sudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDBFQWlCd0M7QUFDeEMsOERBQW1GO0FBQ25GLDRFQUE0RjtBQUM1RiwwRkFBd0Y7QUFDeEYsa0ZBQThGO0FBQzlGLDREQUE4RDtBQUM5RCxrRUFBNkQ7QUFDN0QscUNBQThEO0FBQzlELGtEQU02QjtBQUU3QixJQUFJLENBQUMsSUFBSSxDQUFDLGtEQUFrRCxDQUFDLENBQUM7QUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELHlDQUF5QyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7Q0FDN0UsQ0FBQyxDQUFDLENBQUM7QUFFSixNQUFNLFVBQVUsR0FBRyxJQUFBLGdCQUFTLEVBQUM7SUFDM0IsU0FBUyxFQUFFLGVBQWU7Q0FDM0IsQ0FBQyxDQUFDO0FBRUgsTUFBTSwwQkFBMEIsR0FBRyxJQUFBLGdCQUFTLEVBQUM7SUFDM0MsU0FBUyxFQUFFLGdCQUFnQjtJQUMzQixRQUFRLEVBQUU7UUFDUixVQUFVLEVBQUU7WUFDVixRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFO1lBQzVCLFVBQVUsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRTtZQUNyRCxjQUFjLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFO1NBQ25DO0tBQ0Y7Q0FDRixDQUFDLENBQUM7QUFFSCxNQUFNLGlDQUFpQyxHQUFHLElBQUEsZ0JBQVMsRUFBQztJQUNsRCxTQUFTLEVBQUUsd0JBQXdCO0lBQ25DLFFBQVEsRUFBRSw0QkFBcUI7SUFDL0IscUJBQXFCLEVBQUUsSUFBSTtDQUM1QixDQUFDLENBQUM7QUFFSCxNQUFNLFlBQVksR0FBRztJ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RCxTQUFTLGlDQUFpQyxDQUFDLFdBQW9CO0lBQzdELG1DQUF3QixDQUFDLEVBQUUsQ0FBQyxnREFBd0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQztRQUM3RCxNQUFNLEVBQUUsaUJBQWlCO1FBQ3pCLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ3JCO2dCQUNFLElBQUksRUFBRSxVQUFVO2dCQUNoQixjQUFjLEVBQUU7b0JBQ2QsWUFBWSxFQUFFLGtCQUFrQjtvQkFDaEMsTUFBTSxFQUFFLFFBQVE7b0JBQ2hCLGlCQUFpQixFQUFFLGVBQWU7b0JBQ2xDLGtCQUFrQixFQUFFLGtGQUFrRjtvQkFDdEcsWUFBWSxFQUFFLGlCQUFpQjtvQkFDL0IsV0FBVyxFQUFFLE1BQU07b0JBQ25CLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztvQkFDckIsT0FBTyxFQUFFO3dCQUNQOzRCQUNFLE1BQU0sRUFBRTtnQ0FDTixTQUFTLEVBQUUsWUFBWTtnQ0FDdkIsSUFBSSxFQUFFLFdBQVc7Z0NBQ2pCLGtCQUFrQixFQUFFLFFBQVE7NkJBQzdCOzRCQUNELFVBQVUsRUFBRSxRQUFROzRCQUNwQixZQUFZLEVBQUUsb0JBQW9CO3lCQUNuQztxQkFDRjtpQkFDRjthQUNGO1NBQ0YsQ0FBQyxDQUFDLENBQUMsRUFBRTtLQUNQLENBQUMsQ0FBQztBQUNMLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VTZXRTdGF0dXMsXG4gIENoYW5nZVNldFR5cGUsXG4gIENyZWF0ZUNoYW5nZVNldENvbW1hbmQsXG4gIHR5cGUgQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZElucHV0LFxuICBDcmVhdGVTdGFja0NvbW1hbmQsXG4gIERlbGV0ZUNoYW5nZVNldENvbW1hbmQsXG4gIERlbGV0ZVN0YWNrQ29tbWFuZCxcbiAgRGVzY3JpYmVDaGFuZ2VTZXRDb21tYW5kLFxuICBEZXNjcmliZVN0YWNrc0NvbW1hbmQsXG4gIEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kLFxuICB0eXBlIEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQsXG4gIEdldFRlbXBsYXRlQ29tbWFuZCxcbiAgdHlwZSBTdGFjayxcbiAgU3RhY2tTdGF0dXMsXG4gIFVwZGF0ZVN0YWNrQ29tbWFuZCxcbiAgVXBkYXRlVGVybWluYXRpb25Qcm90ZWN0aW9uQ29tbWFuZCxcbn0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWNsb3VkZm9ybWF0aW9uJztcbmltcG9ydCB7IGFzc2VydElzU3VjY2Vzc2Z1bERlcGxveVN0YWNrUmVzdWx0IH0gZnJvbSAnLi4vLi4vLi4vbGliL2FwaS9kZXBsb3ltZW50cyc7XG5pbXBvcnQgeyBkZXBsb3lTdGFjaywgRGVwbG95U3RhY2tPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vbGliL2FwaS9kZXBsb3ltZW50cy9kZXBsb3ktc3RhY2snO1xuaW1wb3J0IHsgdHJ5SG90c3dhcERlcGxveW1lbnQgfSBmcm9tICcuLi8uLi8uLi9saWIvYXBpL2RlcGxveW1lbnRzL2hvdHN3YXAtZGVwbG95bWVudHMnO1xuaW1wb3J0IHsgTm9Cb290c3RyYXBTdGFja0Vudmlyb25tZW50UmVzb3VyY2VzIH0gZnJvbSAnLi4vLi4vLi4vbGliL2FwaS9lbnZpcm9ubWVudC1yZXNvdXJjZXMnO1xuaW1wb3J0IHsgSG90c3dhcE1vZGUgfSBmcm9tICcuLi8uLi8uLi9saWIvYXBpL2hvdHN3YXAvY29tbW9uJztcbmltcG9ydCB7IENsaUlvSG9zdCB9IGZyb20gJy4uLy4uLy4uL2xpYi90b29sa2l0L2NsaS1pby1ob3N0JztcbmltcG9ydCB7IERFRkFVTFRfRkFLRV9URU1QTEFURSwgdGVzdFN0YWNrIH0gZnJvbSAnLi4vLi4vdXRpbCc7XG5pbXBvcnQge1xuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQsXG4gIG1vY2tSZXNvbHZlZEVudmlyb25tZW50LFxuICBNb2NrU2RrLFxuICBNb2NrU2RrUHJvdmlkZXIsXG4gIHJlc3RvcmVTZGtNb2Nrc1RvRGVmYXVsdCxcbn0gZnJvbSAnLi4vLi4vdXRpbC9tb2NrLXNkayc7XG5cbmplc3QubW9jaygnLi4vLi4vLi4vbGliL2FwaS9kZXBsb3ltZW50cy9ob3Rzd2FwLWRlcGxveW1lbnRzJyk7XG5qZXN0Lm1vY2soJy4uLy4uLy4uL2xpYi9hcGkvZGVwbG95bWVudHMvY2hlY2tzJywgKCkgPT4gKHtcbiAgZGV0ZXJtaW5lQWxsb3dDcm9zc0FjY291bnRBc3NldFB1Ymxpc2hpbmc6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbn0pKTtcblxuY29uc3QgRkFLRV9TVEFDSyA9IHRlc3RTdGFjayh7XG4gIHN0YWNrTmFtZTogJ3dpdGhvdXRlcnJvcnMnLFxufSk7XG5cbmNvbnN0IEZBS0VfU1RBQ0tfV0lUSF9QQVJBTUVURVJTID0gdGVzdFN0YWNrKHtcbiAgc3RhY2tOYW1lOiAnd2l0aHBhcmFtZXRlcnMnLFxuICB0ZW1wbGF0ZToge1xuICAgIFBhcmFtZXRlcnM6IHtcbiAgICAgIEhhc1ZhbHVlOiB7IFR5cGU6ICdTdHJpbmcnIH0sXG4gICAgICBIYXNEZWZhdWx0OiB7IFR5cGU6ICdTdHJpbmcnLCBEZWZhdWx0OiAnVGhlRGVmYXVsdCcgfSxcbiAgICAgIE90aGVyUGFyYW1ldGVyOiB7IFR5cGU6ICdTdHJpbmcnIH0sXG4gICAgfSxcbiAgfSxcbn0pO1xuXG5jb25zdCBGQUtFX1NUQUNLX1RFUk1JTkFUSU9OX1BST1RFQ1RJT04gPSB0ZXN0U3RhY2soe1xuICBzdGFja05hbWU6ICd0ZXJtaW5hdGlvbi1wcm90ZWN0aW9uJyxcbiAgdGVtcGxhdGU6IERFRkFVTFRfRkFLRV9URU1QTEFURSxcbiAgdGVybWluYXRpb25Qcm90ZWN0aW9uOiB0cnVlLFxufSk7XG5cbmNvbnN0IGJhc2VSZXNwb25zZSA9IHtcbiAgU3RhY2tOYW1lOiAnbW9jay1zdGFjay1uYW1lJyxcbiAgU3RhY2tJZDogJ21vY2stc3RhY2staWQnLFxuICBDcmVhdGlvblRpbWU6IG5ldyBEYXRlKCksXG4gIFN0YWNrU3RhdHVzOiBTdGFja1N0YXR1cy5DUkVBVEVfQ09NUExFVEUsXG4gIEVuYWJsZVRlcm1pbmF0aW9uUHJvdGVjdGlvbjogZmFsc2UsXG59O1xuXG5sZXQgc2RrOiBNb2NrU2RrO1xubGV0IHNka1Byb3ZpZGVyOiBNb2NrU2RrUHJvdmlkZXI7XG5cbmJlZm9yZUVhY2goKCkgPT4ge1xuICBzZGtQcm92aWRlciA9IG5ldyBNb2NrU2RrUHJvdmlkZXIoKTtcbiAgc2RrID0gbmV3IE1vY2tTZGsoKTtcbiAgc2RrLmdldFVybFN1ZmZpeCA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgnYW1hem9uYXdzLmNvbScpO1xuICBqZXN0LnJlc2V0QWxsTW9ja3MoKTtcblxuICByZXN0b3JlU2RrTW9ja3NUb0RlZmF1bHQoKTtcbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50XG4gICAgLm9uKERlc2NyaWJlU3RhY2tzQ29tbWFuZClcbiAgICAvLyBGaXJzdCBjYWxsLCBubyBzdGFja3MgZXhpc1xuICAgIC5yZXNvbHZlc09uY2Uoe1xuICAgICAgU3RhY2tzOiBbXSxcbiAgICB9KVxuICAgIC8vIFNlY29uZCBjYWxsLCBzdGFjayBoYXMgYmVlbiBjcmVhdGVkXG4gICAgLnJlc29sdmVzKHtcbiAgICAgIFN0YWNrczogW1xuICAgICAgICB7XG4gICAgICAgICAgU3RhY2tTdGF0dXM6IFN0YWNrU3RhdHVzLkNSRUFURV9DT01QTEVURSxcbiAgICAgICAgICBTdGFja1N0YXR1c1JlYXNvbjogJ0l0IGlzIG1hZ2ljJyxcbiAgICAgICAgICBFbmFibGVUZXJtaW5hdGlvblByb3RlY3Rpb246IGZhbHNlLFxuICAgICAgICAgIFN0YWNrTmFtZTogJ01hZ2ljYWxTdGFjaycsXG4gICAgICAgICAgQ3JlYXRpb25UaW1lOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlQ2hhbmdlU2V0Q29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFN0YXR1czogU3RhY2tTdGF0dXMuQ1JFQVRFX0NPTVBMRVRFLFxuICAgIENoYW5nZXM6IFtdLFxuICB9KTtcbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKEdldFRlbXBsYXRlQ29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFRlbXBsYXRlQm9keTogSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9GQUtFX1RFTVBMQVRFKSxcbiAgfSk7XG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihVcGRhdGVUZXJtaW5hdGlvblByb3RlY3Rpb25Db21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tJZDogJ3N0YWNrLWlkJyxcbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpOiBEZXBsb3lTdGFja09wdGlvbnMge1xuICBjb25zdCByZXNvbHZlZEVudmlyb25tZW50ID0gbW9ja1Jlc29sdmVkRW52aXJvbm1lbnQoKTtcbiAgcmV0dXJuIHtcbiAgICBzdGFjazogRkFLRV9TVEFDSyxcbiAgICBzZGssXG4gICAgc2RrUHJvdmlkZXIsXG4gICAgcmVzb2x2ZWRFbnZpcm9ubWVudCxcbiAgICBlbnZSZXNvdXJjZXM6IG5ldyBOb0Jvb3RzdHJhcFN0YWNrRW52aXJvbm1lbnRSZXNvdXJjZXMocmVzb2x2ZWRFbnZpcm9ubWVudCwgc2RrKSxcbiAgfTtcbn1cblxudGVzdChcImNhbGxzIHRyeUhvdHN3YXBEZXBsb3ltZW50KCkgaWYgJ2hvdHN3YXAnIGlzIGBIb3Rzd2FwTW9kZS5DTEFTU0lDYFwiLCBhc3luYyAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgY29uc3Qgc3B5T25TZGsgPSBqZXN0LnNweU9uKHNkaywgJ2FwcGVuZEN1c3RvbVVzZXJBZ2VudCcpO1xuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIGhvdHN3YXA6IEhvdHN3YXBNb2RlLkZBTExfQkFDSyxcbiAgICBleHRyYVVzZXJBZ2VudDogJ2V4dHJhLXVzZXItYWdlbnQnLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdCh0cnlIb3Rzd2FwRGVwbG95bWVudCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAvLyBjaGVjayB0aGF0IHRoZSBleHRyYSBVc2VyLUFnZW50IGlzIGhvbm9yZWRcbiAgZXhwZWN0KHNweU9uU2RrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZXh0cmEtdXNlci1hZ2VudCcpO1xuICAvLyBjaGVjayB0aGF0IHRoZSBmYWxsYmFjayBoYXMgYmVlbiBjYWxsZWQgaWYgaG90c3dhcHBpbmcgZmFpbGVkXG4gIGV4cGVjdChzcHlPblNkaykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2Nkay1ob3Rzd2FwL2ZhbGxiYWNrJyk7XG59KTtcblxudGVzdChcImNhbGxzIHRyeUhvdHN3YXBEZXBsb3ltZW50KCkgaWYgJ2hvdHN3YXAnIGlzIGBIb3Rzd2FwTW9kZS5IT1RTV0FQX09OTFlgXCIsIGFzeW5jICgpID0+IHtcbiAgLy8gd2UgbmVlZCB0aGUgZmlyc3QgY2FsbCB0byByZXR1cm4gc29tZXRoaW5nIGluIHRoZSBTdGFja3MgcHJvcCxcbiAgLy8gb3RoZXJ3aXNlIHRoZSBhY2Nlc3MgdG8gYHN0YWNrSWRgIHdpbGwgZmFpbFxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbeyAuLi5iYXNlUmVzcG9uc2UgfV0sXG4gIH0pO1xuICBjb25zdCBzcHlPblNkayA9IGplc3Quc3B5T24oc2RrLCAnYXBwZW5kQ3VzdG9tVXNlckFnZW50Jyk7XG4gIC8vIFdIRU5cbiAgY29uc3QgZGVwbG95U3RhY2tSZXN1bHQgPSBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIGhvdHN3YXA6IEhvdHN3YXBNb2RlLkhPVFNXQVBfT05MWSxcbiAgICBleHRyYVVzZXJBZ2VudDogJ2V4dHJhLXVzZXItYWdlbnQnLFxuICAgIGZvcmNlOiB0cnVlLCAvLyBvdGhlcndpc2UsIGRlcGxveW1lbnQgd291bGQgYmUgc2tpcHBlZFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChkZXBsb3lTdGFja1Jlc3VsdC50eXBlID09PSAnZGlkLWRlcGxveS1zdGFjaycgJiYgZGVwbG95U3RhY2tSZXN1bHQubm9PcCkudG9FcXVhbCh0cnVlKTtcbiAgZXhwZWN0KHRyeUhvdHN3YXBEZXBsb3ltZW50KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIC8vIGNoZWNrIHRoYXQgdGhlIGV4dHJhIFVzZXItQWdlbnQgaXMgaG9ub3JlZFxuICBleHBlY3Qoc3B5T25TZGspLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdleHRyYS11c2VyLWFnZW50Jyk7XG4gIC8vIGNoZWNrIHRoYXQgdGhlIGZhbGxiYWNrIGhhcyBub3QgYmVlbiBjYWxsZWQgaWYgaG90c3dhcHBpbmcgZmFpbGVkXG4gIGV4cGVjdChzcHlPblNkaykubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdjZGstaG90c3dhcC9mYWxsYmFjaycpO1xufSk7XG5cbnRlc3QoJ2NvcnJlY3RseSBwYXNzZXMgQ0ZOIHBhcmFtZXRlcnMgd2hlbiBob3Rzd2FwcGluZycsIGFzeW5jICgpID0+IHtcbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIGhvdHN3YXA6IEhvdHN3YXBNb2RlLkZBTExfQkFDSyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICBBOiAnQS12YWx1ZScsXG4gICAgICBCOiAnQj12YWx1ZScsXG4gICAgICBDOiB1bmRlZmluZWQsXG4gICAgICBEOiAnJyxcbiAgICB9LFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdCh0cnlIb3Rzd2FwRGVwbG95bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgZXhwZWN0LmFueXRoaW5nKCksXG4gICAgeyBBOiAnQS12YWx1ZScsIEI6ICdCPXZhbHVlJyB9LFxuICAgIGV4cGVjdC5hbnl0aGluZygpLFxuICAgIGV4cGVjdC5hbnl0aGluZygpLFxuICAgIEhvdHN3YXBNb2RlLkZBTExfQkFDSyxcbiAgICBleHBlY3QuYW55dGhpbmcoKSxcbiAgKTtcbn0pO1xuXG50ZXN0KCdjb3JyZWN0bHkgcGFzc2VzIFNTTSBwYXJhbWV0ZXJzIHdoZW4gaG90c3dhcHBpbmcnLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpLnJlc29sdmVzKHtcbiAgICBTdGFja3M6IFtcbiAgICAgIHtcbiAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICBQYXJhbWV0ZXJzOiBbeyBQYXJhbWV0ZXJLZXk6ICdTb21lUGFyYW1ldGVyJywgUGFyYW1ldGVyVmFsdWU6ICdQYXJhbWV0ZXJOYW1lJywgUmVzb2x2ZWRWYWx1ZTogJ1NvbWVWYWx1ZScgfV0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICBzdGFjazogdGVzdFN0YWNrKHtcbiAgICAgIHN0YWNrTmFtZTogJ3N0YWNrJyxcbiAgICAgIHRlbXBsYXRlOiB7XG4gICAgICAgIFBhcmFtZXRlcnM6IHtcbiAgICAgICAgICBTb21lUGFyYW1ldGVyOiB7XG4gICAgICAgICAgICBUeXBlOiAnQVdTOjpTU006OlBhcmFtZXRlcjo6VmFsdWU8U3RyaW5nPicsXG4gICAgICAgICAgICBEZWZhdWx0OiAnUGFyYW1ldGVyTmFtZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgaG90c3dhcDogSG90c3dhcE1vZGUuRkFMTF9CQUNLLFxuICAgIHVzZVByZXZpb3VzUGFyYW1ldGVyczogdHJ1ZSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QodHJ5SG90c3dhcERlcGxveW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgIGV4cGVjdC5hbnl0aGluZygpLFxuICAgIHsgU29tZVBhcmFtZXRlcjogJ1NvbWVWYWx1ZScgfSxcbiAgICBleHBlY3QuYW55dGhpbmcoKSxcbiAgICBleHBlY3QuYW55dGhpbmcoKSxcbiAgICBIb3Rzd2FwTW9kZS5GQUxMX0JBQ0ssXG4gICAgZXhwZWN0LmFueXRoaW5nKCksXG4gICk7XG59KTtcblxudGVzdCgnY2FsbCBDcmVhdGVTdGFjayB3aGVuIG1ldGhvZD1kaXJlY3QgYW5kIHRoZSBzdGFjayBkb2VzbnQgZXhpc3QgeWV0JywgYXN5bmMgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgZGVwbG95bWVudE1ldGhvZDogeyBtZXRob2Q6ICdkaXJlY3QnIH0sXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kKENyZWF0ZVN0YWNrQ29tbWFuZCk7XG59KTtcblxudGVzdCgnY2FsbCBVcGRhdGVTdGFjayB3aGVuIG1ldGhvZD1kaXJlY3QgYW5kIHRoZSBzdGFjayBleGlzdHMgYWxyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgLy8gV0hFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbeyAuLi5iYXNlUmVzcG9uc2UgfV0sXG4gIH0pO1xuXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgZGVwbG95bWVudE1ldGhvZDogeyBtZXRob2Q6ICdkaXJlY3QnIH0sXG4gICAgZm9yY2U6IHRydWUsXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kKFVwZGF0ZVN0YWNrQ29tbWFuZCk7XG59KTtcblxudGVzdCgnbWV0aG9kPWRpcmVjdCBhbmQgbm8gdXBkYXRlcyB0byBiZSBwZXJmb3JtZWQnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdObyB1cGRhdGVzIGFyZSB0byBiZSBwZXJmb3JtZWQuJyk7XG4gIGVycm9yLm5hbWUgPSAnVmFsaWRhdGlvbkVycm9yJztcbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKFVwZGF0ZVN0YWNrQ29tbWFuZCkucmVqZWN0c09uY2UoZXJyb3IpO1xuXG4gIC8vIFdIRU5cbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlU3RhY2tzQ29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFN0YWNrczogW3sgLi4uYmFzZVJlc3BvbnNlIH1dLFxuICB9KTtcblxuICBjb25zdCByZXQgPSBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIGRlcGxveW1lbnRNZXRob2Q6IHsgbWV0aG9kOiAnZGlyZWN0JyB9LFxuICAgIGZvcmNlOiB0cnVlLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChyZXQpLnRvRXF1YWwoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBub09wOiB0cnVlIH0pKTtcbn0pO1xuXG50ZXN0KFwiZG9lcyBub3QgY2FsbCB0cnlIb3Rzd2FwRGVwbG95bWVudCgpIGlmICdob3Rzd2FwJyBpcyBmYWxzZVwiLCBhc3luYyAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICBob3Rzd2FwOiB1bmRlZmluZWQsXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KHRyeUhvdHN3YXBEZXBsb3ltZW50KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xufSk7XG5cbnRlc3QoXCJyb2xsYmFjayBzdGlsbCBkZWZhdWx0cyB0byBlbmFibGVkIGV2ZW4gaWYgJ2hvdHN3YXAnIGlzIGVuYWJsZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgaG90c3dhcDogSG90c3dhcE1vZGUuRkFMTF9CQUNLLFxuICAgIHJvbGxiYWNrOiB1bmRlZmluZWQsXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkubm90LnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoXG4gICAgRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQsXG4gICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgRGlzYWJsZVJvbGxiYWNrOiB0cnVlLFxuICAgIH0pLFxuICApO1xufSk7XG5cbnRlc3QoXCJyb2xsYmFjayBkZWZhdWx0cyB0byBlbmFibGVkIGlmICdob3Rzd2FwJyBpcyB1bmRlZmluZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgaG90c3dhcDogdW5kZWZpbmVkLFxuICAgIHJvbGxiYWNrOiB1bmRlZmluZWQsXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kVGltZXMoRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQsIDEpO1xuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChcbiAgICBFeGVjdXRlQ2hhbmdlU2V0Q29tbWFuZCxcbiAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICBEaXNhYmxlUm9sbGJhY2s6IHRydWUsXG4gICAgfSksXG4gICk7XG59KTtcblxudGVzdCgnZG8gZGVwbG95IGV4ZWN1dGFibGUgY2hhbmdlIHNldCB3aXRoIDAgY2hhbmdlcycsIGFzeW5jICgpID0+IHtcbiAgLy8gV0hFTlxuICBjb25zdCByZXQgPSBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChyZXQudHlwZSA9PT0gJ2RpZC1kZXBsb3ktc3RhY2snICYmIHJldC5ub09wKS50b0JlRmFsc3koKTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kKEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kKTtcbn0pO1xuXG50ZXN0KCdjb3JyZWN0bHkgcGFzc2VzIENGTiBwYXJhbWV0ZXJzLCBpZ25vcmluZyBvbmVzIHdpdGggZW1wdHkgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgQTogJ0EtdmFsdWUnLFxuICAgICAgQjogJ0I9dmFsdWUnLFxuICAgICAgQzogdW5kZWZpbmVkLFxuICAgICAgRDogJycsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKENyZWF0ZUNoYW5nZVNldENvbW1hbmQsIHtcbiAgICAuLi5leHBlY3QuYW55dGhpbmcsXG4gICAgUGFyYW1ldGVyczogW1xuICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdBJywgUGFyYW1ldGVyVmFsdWU6ICdBLXZhbHVlJyB9LFxuICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdCJywgUGFyYW1ldGVyVmFsdWU6ICdCPXZhbHVlJyB9LFxuICAgIF0sXG4gICAgVGVtcGxhdGVCb2R5OiBleHBlY3QuYW55KFN0cmluZyksXG4gIH0gYXMgQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZElucHV0KTtcbn0pO1xuXG50ZXN0KCdyZXVzZSBwcmV2aW91cyBwYXJhbWV0ZXJzIGlmIHJlcXVlc3RlZCcsIGFzeW5jICgpID0+IHtcbiAgLy8gR0lWRU5cbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlU3RhY2tzQ29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFN0YWNrczogW1xuICAgICAge1xuICAgICAgICAuLi5iYXNlUmVzcG9uc2UsXG4gICAgICAgIFBhcmFtZXRlcnM6IFtcbiAgICAgICAgICB7IFBhcmFtZXRlcktleTogJ0hhc1ZhbHVlJywgUGFyYW1ldGVyVmFsdWU6ICdUaGVWYWx1ZScgfSxcbiAgICAgICAgICB7IFBhcmFtZXRlcktleTogJ0hhc0RlZmF1bHQnLCBQYXJhbWV0ZXJWYWx1ZTogJ1RoZU9sZFZhbHVlJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgc3RhY2s6IEZBS0VfU1RBQ0tfV0lUSF9QQVJBTUVURVJTLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIE90aGVyUGFyYW1ldGVyOiAnU29tZVZhbHVlJyxcbiAgICB9LFxuICAgIHVzZVByZXZpb3VzUGFyYW1ldGVyczogdHJ1ZSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKENyZWF0ZUNoYW5nZVNldENvbW1hbmQsIHtcbiAgICAuLi5leHBlY3QuYW55dGhpbmcsXG4gICAgUGFyYW1ldGVyczogW1xuICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdIYXNWYWx1ZScsIFVzZVByZXZpb3VzVmFsdWU6IHRydWUgfSxcbiAgICAgIHsgUGFyYW1ldGVyS2V5OiAnSGFzRGVmYXVsdCcsIFVzZVByZXZpb3VzVmFsdWU6IHRydWUgfSxcbiAgICAgIHsgUGFyYW1ldGVyS2V5OiAnT3RoZXJQYXJhbWV0ZXInLCBQYXJhbWV0ZXJWYWx1ZTogJ1NvbWVWYWx1ZScgfSxcbiAgICBdLFxuICB9IGFzIENyZWF0ZUNoYW5nZVNldENvbW1hbmRJbnB1dCk7XG59KTtcblxuZGVzY3JpYmUoJ2NpPXRydWUnLCAoKSA9PiB7XG4gIGxldCBzdGRlcnJNb2NrOiBqZXN0LlNweUluc3RhbmNlO1xuICBsZXQgc3Rkb3V0TW9jazogamVzdC5TcHlJbnN0YW5jZTtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgQ2xpSW9Ib3N0Lmluc3RhbmNlKCkuaXNDSSA9IHRydWU7XG4gICAgamVzdC5yZXNldEFsbE1vY2tzKCk7XG4gICAgc3RkZXJyTW9jayA9IGplc3Quc3B5T24ocHJvY2Vzcy5zdGRlcnIsICd3cml0ZScpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBzdGRvdXRNb2NrID0gamVzdC5zcHlPbihwcm9jZXNzLnN0ZG91dCwgJ3dyaXRlJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBDbGlJb0hvc3QuaW5zdGFuY2UoKS5pc0NJID0gZmFsc2U7XG4gIH0pO1xuICB0ZXN0KCdvdXRwdXQgd3JpdHRlbiB0byBzdGRvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgLy8gR0lWRU5cblxuICAgIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBleHBlY3Qoc3RkZXJyTW9jay5tb2NrLmNhbGxzKS50b0VxdWFsKFtdKTtcbiAgICBleHBlY3Qoc3Rkb3V0TW9jay5tb2NrLmNhbGxzKS5ub3QudG9FcXVhbChbXSk7XG4gIH0pO1xufSk7XG5cbnRlc3QoJ2RvIG5vdCByZXVzZSBwcmV2aW91cyBwYXJhbWV0ZXJzIGlmIG5vdCByZXF1ZXN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpLnJlc29sdmVzKHtcbiAgICBTdGFja3M6IFtcbiAgICAgIHtcbiAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICBQYXJhbWV0ZXJzOiBbXG4gICAgICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdIYXNWYWx1ZScsIFBhcmFtZXRlclZhbHVlOiAnVGhlVmFsdWUnIH0sXG4gICAgICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdIYXNEZWZhdWx0JywgUGFyYW1ldGVyVmFsdWU6ICdUaGVPbGRWYWx1ZScgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIHN0YWNrOiBGQUtFX1NUQUNLX1dJVEhfUEFSQU1FVEVSUyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICBIYXNWYWx1ZTogJ1NvbWVWYWx1ZScsXG4gICAgICBPdGhlclBhcmFtZXRlcjogJ1NvbWVWYWx1ZScsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKENyZWF0ZUNoYW5nZVNldENvbW1hbmQsIHtcbiAgICAuLi5leHBlY3QuYW55dGhpbmcsXG4gICAgQ2hhbmdlU2V0VHlwZTogQ2hhbmdlU2V0VHlwZS5VUERBVEUsXG4gICAgUGFyYW1ldGVyczogW1xuICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdIYXNWYWx1ZScsIFBhcmFtZXRlclZhbHVlOiAnU29tZVZhbHVlJyB9LFxuICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdPdGhlclBhcmFtZXRlcicsIFBhcmFtZXRlclZhbHVlOiAnU29tZVZhbHVlJyB9LFxuICAgIF0sXG4gIH0gYXMgQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZElucHV0KTtcbn0pO1xuXG50ZXN0KCd0aHJvdyBleGNlcHRpb24gaWYgbm90IGVub3VnaCBwYXJhbWV0ZXJzIHN1cHBsaWVkJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbXG4gICAgICB7XG4gICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgUGFyYW1ldGVyczogW1xuICAgICAgICAgIHsgUGFyYW1ldGVyS2V5OiAnSGFzVmFsdWUnLCBQYXJhbWV0ZXJWYWx1ZTogJ1RoZVZhbHVlJyB9LFxuICAgICAgICAgIHsgUGFyYW1ldGVyS2V5OiAnSGFzRGVmYXVsdCcsIFBhcmFtZXRlclZhbHVlOiAnVGhlT2xkVmFsdWUnIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZXhwZWN0KFxuICAgIGRlcGxveVN0YWNrKHtcbiAgICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICAgIHN0YWNrOiBGQUtFX1NUQUNLX1dJVEhfUEFSQU1FVEVSUyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgT3RoZXJQYXJhbWV0ZXI6ICdTb21lVmFsdWUnLFxuICAgICAgfSxcbiAgICB9KSxcbiAgKS5yZWplY3RzLnRvVGhyb3coL0Nsb3VkRm9ybWF0aW9uIFBhcmFtZXRlcnMgYXJlIG1pc3NpbmcgYSB2YWx1ZS8pO1xufSk7XG5cbnRlc3QoJ2RlcGxveSBpcyBza2lwcGVkIGlmIHRlbXBsYXRlIGRpZCBub3QgY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbXG4gICAgICB7XG4gICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLm5vdC50b0hhdmVSZWNlaXZlZENvbW1hbmQoRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQpO1xufSk7XG5cbnRlc3QoJ2RlcGxveSBpcyBza2lwcGVkIGlmIHBhcmFtZXRlcnMgYXJlIHRoZSBzYW1lJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBnaXZlblRlbXBsYXRlSXMoRkFLRV9TVEFDS19XSVRIX1BBUkFNRVRFUlMudGVtcGxhdGUpO1xuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbXG4gICAgICB7XG4gICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgUGFyYW1ldGVyczogW1xuICAgICAgICAgIHsgUGFyYW1ldGVyS2V5OiAnSGFzVmFsdWUnLCBQYXJhbWV0ZXJWYWx1ZTogJ1RoZVZhbHVlJyB9LFxuICAgICAgICAgIHsgUGFyYW1ldGVyS2V5OiAnSGFzRGVmYXVsdCcsIFBhcmFtZXRlclZhbHVlOiAnVGhlT2xkVmFsdWUnIH0sXG4gICAgICAgICAgeyBQYXJhbWV0ZXJLZXk6ICdPdGhlclBhcmFtZXRlcicsIFBhcmFtZXRlclZhbHVlOiAnT3RoZXJQYXJhbWV0ZXInIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICBzdGFjazogRkFLRV9TVEFDS19XSVRIX1BBUkFNRVRFUlMsXG4gICAgcGFyYW1ldGVyczoge30sXG4gICAgdXNlUHJldmlvdXNQYXJhbWV0ZXJzOiB0cnVlLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLm5vdC50b0hhdmVSZWNlaXZlZENvbW1hbmQoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG59KTtcblxudGVzdCgnZGVwbG95IGlzIG5vdCBza2lwcGVkIGlmIHBhcmFtZXRlcnMgYXJlIGRpZmZlcmVudCcsIGFzeW5jICgpID0+IHtcbiAgLy8gR0lWRU5cbiAgZ2l2ZW5UZW1wbGF0ZUlzKEZBS0VfU1RBQ0tfV0lUSF9QQVJBTUVURVJTLnRlbXBsYXRlKTtcbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlU3RhY2tzQ29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFN0YWNrczogW1xuICAgICAge1xuICAgICAgICAuLi5iYXNlUmVzcG9uc2UsXG4gICAgICAgIFBhcmFtZXRlcnM6IFtcbiAgICAgICAgICB7IFBhcmFtZXRlcktleTogJ0hhc1ZhbHVlJywgUGFyYW1ldGVyVmFsdWU6ICdUaGVWYWx1ZScgfSxcbiAgICAgICAgICB7IFBhcmFtZXRlcktleTogJ0hhc0RlZmF1bHQnLCBQYXJhbWV0ZXJWYWx1ZTogJ1RoZU9sZFZhbHVlJyB9LFxuICAgICAgICAgIHsgUGFyYW1ldGVyS2V5OiAnT3RoZXJQYXJhbWV0ZXInLCBQYXJhbWV0ZXJWYWx1ZTogJ090aGVyUGFyYW1ldGVyJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgc3RhY2s6IEZBS0VfU1RBQ0tfV0lUSF9QQVJBTUVURVJTLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIEhhc1ZhbHVlOiAnTmV3VmFsdWUnLFxuICAgIH0sXG4gICAgdXNlUHJldmlvdXNQYXJhbWV0ZXJzOiB0cnVlLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCwge1xuICAgIC4uLmV4cGVjdC5hbnl0aGluZyxcbiAgICBDaGFuZ2VTZXRUeXBlOiBDaGFuZ2VTZXRUeXBlLlVQREFURSxcbiAgICBQYXJhbWV0ZXJzOiBbXG4gICAgICB7IFBhcmFtZXRlcktleTogJ0hhc1ZhbHVlJywgUGFyYW1ldGVyVmFsdWU6ICdOZXdWYWx1ZScgfSxcbiAgICAgIHsgUGFyYW1ldGVyS2V5OiAnSGFzRGVmYXVsdCcsIFVzZVByZXZpb3VzVmFsdWU6IHRydWUgfSxcbiAgICAgIHsgUGFyYW1ldGVyS2V5OiAnT3RoZXJQYXJhbWV0ZXInLCBVc2VQcmV2aW91c1ZhbHVlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSBhcyBDcmVhdGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xufSk7XG5cbnRlc3QoJ2RlcGxveSBpcyBza2lwcGVkIGlmIG5vdGlmaWNhdGlvbkFybnMgYXJlIHRoZSBzYW1lJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBnaXZlblRlbXBsYXRlSXMoRkFLRV9TVEFDSy50ZW1wbGF0ZSk7XG4gIGdpdmVuU3RhY2tFeGlzdHMoe1xuICAgIE5vdGlmaWNhdGlvbkFSTnM6IFsnYXJuOmF3czpzbnM6YmVybXVkYS10cmlhbmdsZS0xMzM3OjEyMzQ1Njc4OTAxMjpUZXN0VG9waWMnXSxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIHN0YWNrOiBGQUtFX1NUQUNLLFxuICAgIG5vdGlmaWNhdGlvbkFybnM6IFsnYXJuOmF3czpzbnM6YmVybXVkYS10cmlhbmdsZS0xMzM3OjEyMzQ1Njc4OTAxMjpUZXN0VG9waWMnXSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kKENyZWF0ZUNoYW5nZVNldENvbW1hbmQpO1xufSk7XG5cbnRlc3QoJ2RlcGxveSBpcyBub3Qgc2tpcHBlZCBpZiBub3RpZmljYXRpb25Bcm5zIGFyZSBkaWZmZXJlbnQnLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIGdpdmVuVGVtcGxhdGVJcyhGQUtFX1NUQUNLLnRlbXBsYXRlKTtcbiAgZ2l2ZW5TdGFja0V4aXN0cyh7XG4gICAgTm90aWZpY2F0aW9uQVJOczogWydhcm46YXdzOnNuczpiZXJtdWRhLXRyaWFuZ2xlLTEzMzc6MTIzNDU2Nzg5MDEyOlRlc3RUb3BpYyddLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgc3RhY2s6IEZBS0VfU1RBQ0ssXG4gICAgbm90aWZpY2F0aW9uQXJuczogWydhcm46YXdzOnNuczpiZXJtdWRhLXRyaWFuZ2xlLTEzMzc6MTIzNDU2Nzg5MDEyOk1hZ2ljVG9waWMnXSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG59KTtcblxudGVzdCgnaWYgZXhpc3Rpbmcgc3RhY2sgZmFpbGVkIHRvIGNyZWF0ZSwgaXQgaXMgZGVsZXRlZCBhbmQgcmVjcmVhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnRcbiAgICAub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKVxuICAgIC5yZXNvbHZlc09uY2Uoe1xuICAgICAgU3RhY2tzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5iYXNlUmVzcG9uc2UsXG4gICAgICAgICAgU3RhY2tTdGF0dXM6IFN0YWNrU3RhdHVzLlJPTExCQUNLX0NPTVBMRVRFLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICAgIC5yZXNvbHZlc09uY2Uoe1xuICAgICAgU3RhY2tzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5iYXNlUmVzcG9uc2UsXG4gICAgICAgICAgU3RhY2tTdGF0dXM6IFN0YWNrU3RhdHVzLkRFTEVURV9DT01QTEVURSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSlcbiAgICAucmVzb2x2ZXMoe1xuICAgICAgU3RhY2tzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5iYXNlUmVzcG9uc2UsXG4gICAgICAgICAgU3RhY2tTdGF0dXM6IFN0YWNrU3RhdHVzLkNSRUFURV9DT01QTEVURSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIGdpdmVuVGVtcGxhdGVJcyh7XG4gICAgRGlmZmVyZW50VGhhbjogJ1RoZURlZmF1bHQnLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kKERlbGV0ZVN0YWNrQ29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCwge1xuICAgIC4uLmV4cGVjdC5hbnl0aGluZyxcbiAgICBDaGFuZ2VTZXRUeXBlOiBDaGFuZ2VTZXRUeXBlLkNSRUFURSxcbiAgfSBhcyBDcmVhdGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xufSk7XG5cbnRlc3QoJ2lmIGV4aXN0aW5nIHN0YWNrIGZhaWxlZCB0byBjcmVhdGUsIGl0IGlzIGRlbGV0ZWQgYW5kIHJlY3JlYXRlZCBldmVuIGlmIHRoZSB0ZW1wbGF0ZSBkaWQgbm90IGNoYW5nZScsIGFzeW5jICgpID0+IHtcbiAgLy8gR0lWRU5cbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50XG4gICAgLm9uKERlc2NyaWJlU3RhY2tzQ29tbWFuZClcbiAgICAucmVzb2x2ZXNPbmNlKHtcbiAgICAgIFN0YWNrczogW1xuICAgICAgICB7XG4gICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgIFN0YWNrU3RhdHVzOiBTdGFja1N0YXR1cy5ST0xMQkFDS19DT01QTEVURSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSlcbiAgICAucmVzb2x2ZXNPbmNlKHtcbiAgICAgIFN0YWNrczogW1xuICAgICAgICB7XG4gICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgIFN0YWNrU3RhdHVzOiBTdGFja1N0YXR1cy5ERUxFVEVfQ09NUExFVEUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pXG4gICAgLnJlc29sdmVzKHtcbiAgICAgIFN0YWNrczogW1xuICAgICAgICB7XG4gICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgIFN0YWNrU3RhdHVzOiBTdGFja1N0YXR1cy5DUkVBVEVfQ09NUExFVEUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoRGVsZXRlU3RhY2tDb21tYW5kKTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChDcmVhdGVDaGFuZ2VTZXRDb21tYW5kLCB7XG4gICAgLi4uZXhwZWN0LmFueXRoaW5nLFxuICAgIENoYW5nZVNldFR5cGU6IENoYW5nZVNldFR5cGUuQ1JFQVRFLFxuICB9IGFzIENyZWF0ZUNoYW5nZVNldENvbW1hbmRJbnB1dCk7XG59KTtcblxudGVzdCgnZGVwbG95IG5vdCBza2lwcGVkIGlmIHRlbXBsYXRlIGRpZCBub3QgY2hhbmdlIGFuZCAtLWZvcmNlIGlzIGFwcGxpZWQnLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpLnJlc29sdmVzKHtcbiAgICBTdGFja3M6IFt7IC4uLmJhc2VSZXNwb25zZSB9XSxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIGZvcmNlOiB0cnVlLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFRpbWVzKEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kLCAxKTtcbn0pO1xuXG50ZXN0KCdkZXBsb3kgaXMgc2tpcHBlZCBpZiB0ZW1wbGF0ZSBhbmQgdGFncyBkaWQgbm90IGNoYW5nZScsIGFzeW5jICgpID0+IHtcbiAgLy8gR0lWRU5cbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlU3RhY2tzQ29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFN0YWNrczogW1xuICAgICAge1xuICAgICAgICAuLi5iYXNlUmVzcG9uc2UsXG4gICAgICAgIFRhZ3M6IFtcbiAgICAgICAgICB7IEtleTogJ0tleTEnLCBWYWx1ZTogJ1ZhbHVlMScgfSxcbiAgICAgICAgICB7IEtleTogJ0tleTInLCBWYWx1ZTogJ1ZhbHVlMicgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIHRhZ3M6IFtcbiAgICAgIHsgS2V5OiAnS2V5MScsIFZhbHVlOiAnVmFsdWUxJyB9LFxuICAgICAgeyBLZXk6ICdLZXkyJywgVmFsdWU6ICdWYWx1ZTInIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kKENyZWF0ZUNoYW5nZVNldENvbW1hbmQpO1xuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kKEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kKTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChEZXNjcmliZVN0YWNrc0NvbW1hbmQsIHtcbiAgICBTdGFja05hbWU6ICd3aXRob3V0ZXJyb3JzJyxcbiAgfSk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoR2V0VGVtcGxhdGVDb21tYW5kLCB7XG4gICAgU3RhY2tOYW1lOiAnd2l0aG91dGVycm9ycycsXG4gICAgVGVtcGxhdGVTdGFnZTogJ09yaWdpbmFsJyxcbiAgfSk7XG59KTtcblxudGVzdCgnZGVwbG95IG5vdCBza2lwcGVkIGlmIHRlbXBsYXRlIGRpZCBub3QgY2hhbmdlIGJ1dCB0YWdzIGNoYW5nZWQnLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIGdpdmVuU3RhY2tFeGlzdHMoe1xuICAgIFRhZ3M6IFt7IEtleTogJ0tleScsIFZhbHVlOiAnVmFsdWUnIH1dLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGNvbnN0IHJlc29sdmVkRW52aXJvbm1lbnQgPSBtb2NrUmVzb2x2ZWRFbnZpcm9ubWVudCgpO1xuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgc3RhY2s6IEZBS0VfU1RBQ0ssXG4gICAgc2RrLFxuICAgIHNka1Byb3ZpZGVyLFxuICAgIHJlc29sdmVkRW52aXJvbm1lbnQsXG4gICAgdGFnczogW1xuICAgICAge1xuICAgICAgICBLZXk6ICdLZXknLFxuICAgICAgICBWYWx1ZTogJ05ld1ZhbHVlJyxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBlbnZSZXNvdXJjZXM6IG5ldyBOb0Jvb3RzdHJhcFN0YWNrRW52aXJvbm1lbnRSZXNvdXJjZXMocmVzb2x2ZWRFbnZpcm9ubWVudCwgc2RrKSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChFeGVjdXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChEZXNjcmliZUNoYW5nZVNldENvbW1hbmQpO1xuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKERlc2NyaWJlU3RhY2tzQ29tbWFuZCwge1xuICAgIFN0YWNrTmFtZTogJ3dpdGhvdXRlcnJvcnMnLFxuICB9KTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChHZXRUZW1wbGF0ZUNvbW1hbmQsIHtcbiAgICBTdGFja05hbWU6ICd3aXRob3V0ZXJyb3JzJyxcbiAgICBUZW1wbGF0ZVN0YWdlOiAnT3JpZ2luYWwnLFxuICB9KTtcbn0pO1xuXG50ZXN0KCdkZXBsb3lTdGFjayByZXBvcnRzIG5vIGNoYW5nZSBpZiBkZXNjcmliZUNoYW5nZVNldCByZXR1cm5zIHNwZWNpZmljIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVDaGFuZ2VTZXRDb21tYW5kKS5yZXNvbHZlc09uY2Uoe1xuICAgIFN0YXR1czogQ2hhbmdlU2V0U3RhdHVzLkZBSUxFRCxcbiAgICBTdGF0dXNSZWFzb246ICdObyB1cGRhdGVzIGFyZSB0byBiZSBwZXJmb3JtZWQuJyxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBjb25zdCBkZXBsb3lSZXN1bHQgPSBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChkZXBsb3lSZXN1bHQudHlwZSA9PT0gJ2RpZC1kZXBsb3ktc3RhY2snICYmIGRlcGxveVJlc3VsdC5ub09wKS50b0VxdWFsKHRydWUpO1xufSk7XG5cbnRlc3QoJ2RlcGxveSBub3Qgc2tpcHBlZCBpZiB0ZW1wbGF0ZSBkaWQgbm90IGNoYW5nZSBidXQgb25lIHRhZyByZW1vdmVkJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbXG4gICAgICB7XG4gICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgVGFnczogW1xuICAgICAgICAgIHsgS2V5OiAnS2V5MScsIFZhbHVlOiAnVmFsdWUxJyB9LFxuICAgICAgICAgIHsgS2V5OiAnS2V5MicsIFZhbHVlOiAnVmFsdWUyJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgdGFnczogW3sgS2V5OiAnS2V5MScsIFZhbHVlOiAnVmFsdWUxJyB9XSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChFeGVjdXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChEZXNjcmliZUNoYW5nZVNldENvbW1hbmQpO1xuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKERlc2NyaWJlU3RhY2tzQ29tbWFuZCwge1xuICAgIFN0YWNrTmFtZTogJ3dpdGhvdXRlcnJvcnMnLFxuICB9KTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChHZXRUZW1wbGF0ZUNvbW1hbmQsIHtcbiAgICBTdGFja05hbWU6ICd3aXRob3V0ZXJyb3JzJyxcbiAgICBUZW1wbGF0ZVN0YWdlOiAnT3JpZ2luYWwnLFxuICB9KTtcbn0pO1xuXG50ZXN0KCdkZXBsb3kgaXMgbm90IHNraXBwZWQgaWYgc3RhY2sgaXMgaW4gYSBfRkFJTEVEIHN0YXRlJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbXG4gICAgICB7XG4gICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgU3RhY2tTdGF0dXM6IFN0YWNrU3RhdHVzLkRFTEVURV9GQUlMRUQsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICB1c2VQcmV2aW91c1BhcmFtZXRlcnM6IHRydWUsXG4gIH0pLmNhdGNoKCgpID0+IHt9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChDcmVhdGVDaGFuZ2VTZXRDb21tYW5kKTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kKEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kKTtcbn0pO1xuXG50ZXN0KCdleGlzdGluZyBzdGFjayBpbiBVUERBVEVfUk9MTEJBQ0tfQ09NUExFVEUgc3RhdGUgY2FuIGJlIHVwZGF0ZWQnLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudFxuICAgIC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpXG4gICAgLnJlc29sdmVzT25jZSh7XG4gICAgICBTdGFja3M6IFtcbiAgICAgICAge1xuICAgICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgICBTdGFja1N0YXR1czogU3RhY2tTdGF0dXMuVVBEQVRFX1JPTExCQUNLX0NPTVBMRVRFLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICAgIC5yZXNvbHZlcyh7XG4gICAgICBTdGFja3M6IFtcbiAgICAgICAge1xuICAgICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgICBTdGFja1N0YXR1czogU3RhY2tTdGF0dXMuVVBEQVRFX0NPTVBMRVRFLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgZ2l2ZW5UZW1wbGF0ZUlzKHsgY2hhbmdlZDogMTIzIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kKERlbGV0ZVN0YWNrQ29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCwge1xuICAgIC4uLmV4cGVjdC5hbnl0aGluZyxcbiAgICBDaGFuZ2VTZXRUeXBlOiBDaGFuZ2VTZXRUeXBlLlVQREFURSxcbiAgfSBhcyBDcmVhdGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xufSk7XG5cbnRlc3QoJ2RlcGxveSBub3Qgc2tpcHBlZCBpZiB0ZW1wbGF0ZSBjaGFuZ2VkJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbeyAuLi5iYXNlUmVzcG9uc2UgfV0sXG4gIH0pO1xuICBnaXZlblRlbXBsYXRlSXMoeyBjaGFuZ2VkOiAxMjMgfSk7XG5cbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChDcmVhdGVDaGFuZ2VTZXRDb21tYW5kKTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kKEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kKTtcbn0pO1xuXG50ZXN0KCdub3QgZXhlY3V0ZWQgYW5kIG5vIGVycm9yIGlmIC0tbm8tZXhlY3V0ZSBpcyBnaXZlbicsIGFzeW5jICgpID0+IHtcbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIGRlcGxveW1lbnRNZXRob2Q6IHsgbWV0aG9kOiAnY2hhbmdlLXNldCcsIGV4ZWN1dGU6IGZhbHNlIH0sXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkubm90LnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChFeGVjdXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG59KTtcblxudGVzdCgnZW1wdHkgY2hhbmdlIHNldCBpcyBkZWxldGVkIGlmIC0tZXhlY3V0ZSBpcyBnaXZlbicsIGFzeW5jICgpID0+IHtcbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlQ2hhbmdlU2V0Q29tbWFuZCkucmVzb2x2ZXNPbmNlKHtcbiAgICBTdGF0dXM6IENoYW5nZVNldFN0YXR1cy5GQUlMRUQsXG4gICAgU3RhdHVzUmVhc29uOiAnTm8gdXBkYXRlcyBhcmUgdG8gYmUgcGVyZm9ybWVkLicsXG4gIH0pO1xuXG4gIC8vIEdJVkVOXG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpLnJlc29sdmVzKHtcbiAgICBTdGFja3M6IFt7IC4uLmJhc2VSZXNwb25zZSB9XSxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIGRlcGxveW1lbnRNZXRob2Q6IHsgbWV0aG9kOiAnY2hhbmdlLXNldCcsIGV4ZWN1dGU6IHRydWUgfSxcbiAgICBmb3JjZTogdHJ1ZSwgLy8gTmVjZXNzYXJ5IHRvIGJ5cGFzcyBcInNraXAgZGVwbG95XCJcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLm5vdC50b0hhdmVSZWNlaXZlZENvbW1hbmQoRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQpO1xuXG4gIC8vdGhlIGZpcnN0IGRlbGV0aW9uIGlzIGZvciBhbnkgZXhpc3RpbmcgY2RrIGNoYW5nZSBzZXRzLCB0aGUgc2Vjb25kIGlzIGZvciB0aGUgZGVsZXRpbmcgdGhlIG5ldyBlbXB0eSBjaGFuZ2Ugc2V0XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFRpbWVzKERlbGV0ZUNoYW5nZVNldENvbW1hbmQsIDIpO1xufSk7XG5cbnRlc3QoJ2VtcHR5IGNoYW5nZSBzZXQgaXMgbm90IGRlbGV0ZWQgaWYgLS1uby1leGVjdXRlIGlzIGdpdmVuJywgYXN5bmMgKCkgPT4ge1xuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVDaGFuZ2VTZXRDb21tYW5kKS5yZXNvbHZlc09uY2Uoe1xuICAgIFN0YXR1czogQ2hhbmdlU2V0U3RhdHVzLkZBSUxFRCxcbiAgICBTdGF0dXNSZWFzb246ICdObyB1cGRhdGVzIGFyZSB0byBiZSBwZXJmb3JtZWQuJyxcbiAgfSk7XG5cbiAgLy8gR0lWRU5cbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlU3RhY2tzQ29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFN0YWNrczogW3sgLi4uYmFzZVJlc3BvbnNlIH1dLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgZGVwbG95bWVudE1ldGhvZDogeyBtZXRob2Q6ICdjaGFuZ2Utc2V0JywgZXhlY3V0ZTogZmFsc2UgfSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLm5vdC50b0hhdmVSZWNlaXZlZENvbW1hbmQoRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQpO1xuXG4gIC8vdGhlIGZpcnN0IGRlbGV0aW9uIGlzIGZvciBhbnkgZXhpc3RpbmcgY2RrIGNoYW5nZSBzZXRzXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFRpbWVzKERlbGV0ZUNoYW5nZVNldENvbW1hbmQsIDEpO1xufSk7XG5cbnRlc3QoJ3VzZSBTMyB1cmwgZm9yIHN0YWNrIGRlcGxveW1lbnQgaWYgcHJlc2VudCBpbiBTdGFjayBBcnRpZmFjdCcsIGFzeW5jICgpID0+IHtcbiAgLy8gV0hFTlxuICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIHN0YWNrOiB0ZXN0U3RhY2soe1xuICAgICAgc3RhY2tOYW1lOiAnd2l0aG91dGVycm9ycycsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHN0YWNrVGVtcGxhdGVBc3NldE9iamVjdFVybDogJ2h0dHBzOi8vdXNlLW1lLXVzZS1tZS8nLFxuICAgICAgfSxcbiAgICB9KSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKENyZWF0ZUNoYW5nZVNldENvbW1hbmQsIHtcbiAgICAuLi5leHBlY3QuYW55dGhpbmcsXG4gICAgVGVtcGxhdGVVUkw6ICdodHRwczovL3VzZS1tZS11c2UtbWUvJyxcbiAgfSBhcyBDcmVhdGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQpO1xufSk7XG5cbnRlc3QoJ3VzZSBSRVNUIEFQSSBTMyB1cmwgd2l0aCBzdWJzdGl0dXRlZCBwbGFjZWhvbGRlcnMgaWYgbWFuaWZlc3QgdXJsIHN0YXJ0cyB3aXRoIHMzOi8vJywgYXN5bmMgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgc3RhY2s6IHRlc3RTdGFjayh7XG4gICAgICBzdGFja05hbWU6ICd3aXRob3V0ZXJyb3JzJyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgc3RhY2tUZW1wbGF0ZUFzc2V0T2JqZWN0VXJsOiAnczM6Ly91c2UtbWUtdXNlLW1lLSR7QVdTOjpBY2NvdW50SWR9L29iamVjdCcsXG4gICAgICB9LFxuICAgIH0pLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCwge1xuICAgIC4uLmV4cGVjdC5hbnl0aGluZyxcbiAgICBUZW1wbGF0ZVVSTDogJ2h0dHBzOi8vczMuYmVybXVkYS10cmlhbmdsZS0xMzM3LmFtYXpvbmF3cy5jb20vdXNlLW1lLXVzZS1tZS0xMjM0NTY3ODkvb2JqZWN0JyxcbiAgfSBhcyBDcmVhdGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmQoRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQpO1xufSk7XG5cbnRlc3QoJ2NoYW5nZXNldCBpcyBjcmVhdGVkIHdoZW4gc3RhY2sgZXhpc3RzIGluIFJFVklFV19JTl9QUk9HUkVTUyBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpLnJlc29sdmVzKHtcbiAgICBTdGFja3M6IFtcbiAgICAgIHtcbiAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICBTdGFja1N0YXR1czogU3RhY2tTdGF0dXMuUkVWSUVXX0lOX1BST0dSRVNTLFxuICAgICAgICBUYWdzOiBbXG4gICAgICAgICAgeyBLZXk6ICdLZXkxJywgVmFsdWU6ICdWYWx1ZTEnIH0sXG4gICAgICAgICAgeyBLZXk6ICdLZXkyJywgVmFsdWU6ICdWYWx1ZTInIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICBkZXBsb3ltZW50TWV0aG9kOiB7IG1ldGhvZDogJ2NoYW5nZS1zZXQnLCBleGVjdXRlOiBmYWxzZSB9LFxuICB9KTtcblxuICAvLyBUSEVOXG4gIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZCwge1xuICAgIC4uLmV4cGVjdC5hbnl0aGluZyxcbiAgICBDaGFuZ2VTZXRUeXBlOiBDaGFuZ2VTZXRUeXBlLkNSRUFURSxcbiAgICBTdGFja05hbWU6ICd3aXRob3V0ZXJyb3JzJyxcbiAgfSBhcyBDcmVhdGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kKEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kKTtcbn0pO1xuXG50ZXN0KCdjaGFuZ2VzZXQgaXMgdXBkYXRlZCB3aGVuIHN0YWNrIGV4aXN0cyBpbiBDUkVBVEVfQ09NUExFVEUgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oRGVzY3JpYmVTdGFja3NDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbXG4gICAgICB7XG4gICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgVGFnczogW1xuICAgICAgICAgIHsgS2V5OiAnS2V5MScsIFZhbHVlOiAnVmFsdWUxJyB9LFxuICAgICAgICAgIHsgS2V5OiAnS2V5MicsIFZhbHVlOiAnVmFsdWUyJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgZGVwbG95bWVudE1ldGhvZDogeyBtZXRob2Q6ICdjaGFuZ2Utc2V0JywgZXhlY3V0ZTogZmFsc2UgfSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKENyZWF0ZUNoYW5nZVNldENvbW1hbmQsIHtcbiAgICAuLi5leHBlY3QuYW55dGhpbmcsXG4gICAgQ2hhbmdlU2V0VHlwZTogQ2hhbmdlU2V0VHlwZS5VUERBVEUsXG4gICAgU3RhY2tOYW1lOiAnd2l0aG91dGVycm9ycycsXG4gIH0gYXMgQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZElucHV0KTtcbiAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkubm90LnRvSGF2ZVJlY2VpdmVkQ29tbWFuZChFeGVjdXRlQ2hhbmdlU2V0Q29tbWFuZCk7XG59KTtcblxudGVzdCgnZGVwbG95IHdpdGggdGVybWluYXRpb24gcHJvdGVjdGlvbiBlbmFibGVkJywgYXN5bmMgKCkgPT4ge1xuICAvLyBXSEVOXG4gIGF3YWl0IGRlcGxveVN0YWNrKHtcbiAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgc3RhY2s6IEZBS0VfU1RBQ0tfVEVSTUlOQVRJT05fUFJPVEVDVElPTixcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKFVwZGF0ZVRlcm1pbmF0aW9uUHJvdGVjdGlvbkNvbW1hbmQsIHtcbiAgICBTdGFja05hbWU6ICd0ZXJtaW5hdGlvbi1wcm90ZWN0aW9uJyxcbiAgICBFbmFibGVUZXJtaW5hdGlvblByb3RlY3Rpb246IHRydWUsXG4gIH0pO1xufSk7XG5cbnRlc3QoJ3VwZGF0ZVRlcm1pbmF0aW9uUHJvdGVjdGlvbiBub3QgY2FsbGVkIHdoZW4gdGVybWluYXRpb24gcHJvdGVjdGlvbiBpcyB1bmRlZmluZWQnLCBhc3luYyAoKSA9PiB7XG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kKFVwZGF0ZVRlcm1pbmF0aW9uUHJvdGVjdGlvbkNvbW1hbmQpO1xufSk7XG5cbnRlc3QoJ3VwZGF0ZVRlcm1pbmF0aW9uUHJvdGVjdGlvbiBjYWxsZWQgd2hlbiB0ZXJtaW5hdGlvbiBwcm90ZWN0aW9uIGlzIHVuZGVmaW5lZCBhbmQgc3RhY2sgaGFzIHRlcm1pbmF0aW9uIHByb3RlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gIC8vIEdJVkVOXG4gIG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpLnJlc29sdmVzKHtcbiAgICBTdGFja3M6IFtcbiAgICAgIHtcbiAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICBFbmFibGVUZXJtaW5hdGlvblByb3RlY3Rpb246IHRydWUsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFdIRU5cbiAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS50b0hhdmVSZWNlaXZlZENvbW1hbmRXaXRoKFVwZGF0ZVRlcm1pbmF0aW9uUHJvdGVjdGlvbkNvbW1hbmQsIHtcbiAgICBTdGFja05hbWU6ICd3aXRob3V0ZXJyb3JzJyxcbiAgICBFbmFibGVUZXJtaW5hdGlvblByb3RlY3Rpb246IGZhbHNlLFxuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnZGlzYWJsZSByb2xsYmFjaycsICgpID0+IHtcbiAgdGVzdCgnYnkgZGVmYXVsdCwgd2UgZG8gbm90IGRpc2FibGUgcm9sbGJhY2sgKGFuZCBhbHNvIGRvIG5vdCBwYXNzIHRoZSBmbGFnKScsIGFzeW5jICgpID0+IHtcbiAgICAvLyBXSEVOXG4gICAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFRpbWVzKEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kLCAxKTtcbiAgICBleHBlY3QobW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50KS5ub3QudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChFeGVjdXRlQ2hhbmdlU2V0Q29tbWFuZCwge1xuICAgICAgRGlzYWJsZVJvbGxiYWNrOiBleHBlY3QuYW55dGhpbmcsXG4gICAgICBDaGFuZ2VTZXROYW1lOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3JvbGxiYWNrIGNhbiBiZSBkaXNhYmxlZCBieSBzZXR0aW5nIHJvbGxiYWNrOiBmYWxzZScsIGFzeW5jICgpID0+IHtcbiAgICAvLyBXSEVOXG4gICAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgICAgcm9sbGJhY2s6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdChtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQpLnRvSGF2ZVJlY2VpdmVkQ29tbWFuZFdpdGgoRXhlY3V0ZUNoYW5nZVNldENvbW1hbmQsIHtcbiAgICAgIC4uLmV4cGVjdC5hbnl0aGluZyxcbiAgICAgIERpc2FibGVSb2xsYmFjazogdHJ1ZSxcbiAgICB9IGFzIEV4ZWN1dGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnaW1wb3J0LWV4aXN0aW5nLXJlc291cmNlcycsICgpID0+IHtcbiAgdGVzdCgnaXMgZGlzYWJsZWQgYnkgZGVmYXVsdCcsIGFzeW5jICgpID0+IHtcbiAgICAvLyBXSEVOXG4gICAgYXdhaXQgZGVwbG95U3RhY2soe1xuICAgICAgLi4uc3RhbmRhcmREZXBsb3lTdGFja0FyZ3VtZW50cygpLFxuICAgICAgZGVwbG95bWVudE1ldGhvZDoge1xuICAgICAgICBtZXRob2Q6ICdjaGFuZ2Utc2V0JyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBUSEVOXG4gICAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChDcmVhdGVDaGFuZ2VTZXRDb21tYW5kLCB7XG4gICAgICAuLi5leHBlY3QuYW55dGhpbmcsXG4gICAgICBJbXBvcnRFeGlzdGluZ1Jlc291cmNlczogZmFsc2UsXG4gICAgfSBhcyBDcmVhdGVDaGFuZ2VTZXRDb21tYW5kSW5wdXQpO1xuICB9KTtcblxuICB0ZXN0KCdpcyBhZGRlZCB0byB0aGUgQ3JlYXRlQ2hhbmdlU2V0Q29tbWFuZElucHV0JywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIFdIRU5cbiAgICBhd2FpdCBkZXBsb3lTdGFjayh7XG4gICAgICAuLi5zdGFuZGFyZERlcGxveVN0YWNrQXJndW1lbnRzKCksXG4gICAgICBkZXBsb3ltZW50TWV0aG9kOiB7XG4gICAgICAgIG1ldGhvZDogJ2NoYW5nZS1zZXQnLFxuICAgICAgICBpbXBvcnRFeGlzdGluZ1Jlc291cmNlczogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBUSEVOXG4gICAgZXhwZWN0KG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudCkudG9IYXZlUmVjZWl2ZWRDb21tYW5kV2l0aChDcmVhdGVDaGFuZ2VTZXRDb21tYW5kLCB7XG4gICAgICAuLi5leHBlY3QuYW55dGhpbmcsXG4gICAgICBJbXBvcnRFeGlzdGluZ1Jlc291cmNlczogdHJ1ZSxcbiAgICB9IGFzIENyZWF0ZUNoYW5nZVNldENvbW1hbmRJbnB1dCk7XG4gIH0pO1xufSk7XG5cbnRlc3QuZWFjaChbXG4gIC8vIEZyb20gYSBmYWlsZWQgc3RhdGUsIGEgLS1uby1yb2xsYmFjayBpcyBwb3NzaWJsZSBhcyBsb25nIGFzIHRoZXJlIGlzIG5vdCBhIHJlcGxhY2VtZW50XG4gIFtTdGFja1N0YXR1cy5VUERBVEVfRkFJTEVELCAnbm8tcm9sbGJhY2snLCAnbm8tcmVwbGFjZW1lbnQnLCAnZGlkLWRlcGxveS1zdGFjayddLFxuICBbU3RhY2tTdGF0dXMuVVBEQVRFX0ZBSUxFRCwgJ25vLXJvbGxiYWNrJywgJ3JlcGxhY2VtZW50JywgJ2ZhaWxwYXVzZWQtbmVlZC1yb2xsYmFjay1maXJzdCddLFxuICAvLyBBbnkgY29tYmluYXRpb24gb2YgVVBEQVRFX0ZBSUxFRCAmIHJvbGxiYWNrIGFsd2F5cyByZXF1aXJlcyBhIHJvbGxiYWNrIGZpcnN0XG4gIFtTdGFja1N0YXR1cy5VUERBVEVfRkFJTEVELCAncm9sbGJhY2snLCAncmVwbGFjZW1lbnQnLCAnZmFpbHBhdXNlZC1uZWVkLXJvbGxiYWNrLWZpcnN0J10sXG4gIFtTdGFja1N0YXR1cy5VUERBVEVfRkFJTEVELCAncm9sbGJhY2snLCAnbm8tcmVwbGFjZW1lbnQnLCAnZmFpbHBhdXNlZC1uZWVkLXJvbGxiYWNrLWZpcnN0J10sXG4gIC8vIEZyb20gYSBzdGFibGUgc3RhdGUsIGFueSBkZXBsb3ltZW50IGNvbnRhaW5pbmcgYSByZXBsYWNlbWVudCByZXF1aXJlcyBhIHJlZ3VsYXIgZGVwbG95bWVudCAoLS1yb2xsYmFjaylcbiAgW1N0YWNrU3RhdHVzLlVQREFURV9DT01QTEVURSwgJ25vLXJvbGxiYWNrJywgJ3JlcGxhY2VtZW50JywgJ3JlcGxhY2VtZW50LXJlcXVpcmVzLXJvbGxiYWNrJ10sXG5dIHNhdGlzZmllcyBBcnJheTxbU3RhY2tTdGF0dXMsICdyb2xsYmFjaycgfCAnbm8tcm9sbGJhY2snLCAncmVwbGFjZW1lbnQnIHwgJ25vLXJlcGxhY2VtZW50Jywgc3RyaW5nXT4pXG4oJ25vLXJvbGxiYWNrIGFuZCByZXBsYWNlbWVudCBpcyBkaXNhZHZpc2VkOiAlcyAlcyAlcyAtPiAlcycsIGFzeW5jIChzdGFja1N0YXR1cywgcm9sbGJhY2ssIHJlcGxhY2VtZW50LCBleHBlY3RlZFR5cGUpID0+IHtcbiAgLy8gR0lWRU5cbiAgZ2l2ZW5UZW1wbGF0ZUlzKEZBS0VfU1RBQ0sudGVtcGxhdGUpO1xuICBnaXZlblN0YWNrRXhpc3RzKHtcbiAgICAvLyBGaXJzdCBjYWxsXG4gICAgU3RhY2tTdGF0dXM6IHN0YWNrU3RhdHVzLFxuICB9LCB7XG4gICAgLy8gTGF0ZXIgY2FsbHNcbiAgICBTdGFja1N0YXR1czogJ1VQREFURV9DT01QTEVURScsXG4gIH0pO1xuICBnaXZlbkNoYW5nZVNldENvbnRhaW5zUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQgPT09ICdyZXBsYWNlbWVudCcpO1xuXG4gIC8vIFdIRU5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVwbG95U3RhY2soe1xuICAgIC4uLnN0YW5kYXJkRGVwbG95U3RhY2tBcmd1bWVudHMoKSxcbiAgICBzdGFjazogRkFLRV9TVEFDSyxcbiAgICByb2xsYmFjazogcm9sbGJhY2sgPT09ICdyb2xsYmFjaycsXG4gICAgZm9yY2U6IHRydWUsIC8vIEJ5cGFzcyAnY2FuU2tpcERlcGxveSdcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBleHBlY3QocmVzdWx0LnR5cGUpLnRvRXF1YWwoZXhwZWN0ZWRUeXBlKTtcbn0pO1xuXG50ZXN0KCdhc3NlcnRJc1N1Y2Nlc3NmdWxEZXBsb3lTdGFja1Jlc3VsdCBkb2VzIHdoYXQgaXQgc2F5cycsICgpID0+IHtcbiAgZXhwZWN0KCgpID0+IGFzc2VydElzU3VjY2Vzc2Z1bERlcGxveVN0YWNrUmVzdWx0KHsgdHlwZTogJ3JlcGxhY2VtZW50LXJlcXVpcmVzLXJvbGxiYWNrJyB9KSkudG9UaHJvdygpO1xufSk7XG4vKipcbiAqIFNldCB1cCB0aGUgbW9ja3Mgc28gdGhhdCBpdCBsb29rcyBsaWtlIHRoZSBzdGFjayBleGlzdHMgdG8gc3RhcnQgd2l0aFxuICpcbiAqIFRoZSBsYXN0IGVsZW1lbnQgb2YgdGhpcyBhcnJheSB3aWxsIGJlIGNvbnRpbnVvdXNseSByZXBlYXRlZC5cbiAqL1xuZnVuY3Rpb24gZ2l2ZW5TdGFja0V4aXN0cyguLi5vdmVycmlkZXM6IEFycmF5PFBhcnRpYWw8U3RhY2s+Pikge1xuICBpZiAob3ZlcnJpZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIG92ZXJyaWRlcyA9IFt7fV07XG4gIH1cblxuICBsZXQgaGFuZGxlciA9IG1vY2tDbG91ZEZvcm1hdGlvbkNsaWVudC5vbihEZXNjcmliZVN0YWNrc0NvbW1hbmQpO1xuXG4gIGZvciAoY29uc3Qgb3ZlcnJpZGUgb2Ygb3ZlcnJpZGVzLnNsaWNlKDAsIG92ZXJyaWRlcy5sZW5ndGggLSAxKSkge1xuICAgIGhhbmRsZXIgPSBoYW5kbGVyLnJlc29sdmVzT25jZSh7XG4gICAgICBTdGFja3M6IFt7IC4uLmJhc2VSZXNwb25zZSwgLi4ub3ZlcnJpZGUgfV0sXG4gICAgfSk7XG4gIH1cbiAgaGFuZGxlci5yZXNvbHZlcyh7XG4gICAgU3RhY2tzOiBbeyAuLi5iYXNlUmVzcG9uc2UsIC4uLm92ZXJyaWRlc1tvdmVycmlkZXMubGVuZ3RoIC0gMV0gfV0sXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnaXZlblRlbXBsYXRlSXModGVtcGxhdGU6IGFueSkge1xuICBtb2NrQ2xvdWRGb3JtYXRpb25DbGllbnQub24oR2V0VGVtcGxhdGVDb21tYW5kKS5yZXNvbHZlcyh7XG4gICAgVGVtcGxhdGVCb2R5OiBKU09OLnN0cmluZ2lmeSh0ZW1wbGF0ZSksXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnaXZlbkNoYW5nZVNldENvbnRhaW5zUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQ6IGJvb2xlYW4pIHtcbiAgbW9ja0Nsb3VkRm9ybWF0aW9uQ2xpZW50Lm9uKERlc2NyaWJlQ2hhbmdlU2V0Q29tbWFuZCkucmVzb2x2ZXMoe1xuICAgIFN0YXR1czogJ0NSRUFURV9DT01QTEVURScsXG4gICAgQ2hhbmdlczogcmVwbGFjZW1lbnQgPyBbXG4gICAgICB7XG4gICAgICAgIFR5cGU6ICdSZXNvdXJjZScsXG4gICAgICAgIFJlc291cmNlQ2hhbmdlOiB7XG4gICAgICAgICAgUG9saWN5QWN0aW9uOiAnUmVwbGFjZUFuZERlbGV0ZScsXG4gICAgICAgICAgQWN0aW9uOiAnTW9kaWZ5JyxcbiAgICAgICAgICBMb2dpY2FsUmVzb3VyY2VJZDogJ1F1ZXVlNEE3RTM1NTUnLFxuICAgICAgICAgIFBoeXNpY2FsUmVzb3VyY2VJZDogJ2h0dHBzOi8vc3FzLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tLzExMTExMTExMTExMS9RdWV1ZTRBN0UzNTU1LVA5QzhuSzN1djh2Ni5maWZvJyxcbiAgICAgICAgICBSZXNvdXJjZVR5cGU6ICdBV1M6OlNRUzo6UXVldWUnLFxuICAgICAgICAgIFJlcGxhY2VtZW50OiAnVHJ1ZScsXG4gICAgICAgICAgU2NvcGU6IFsnUHJvcGVydGllcyddLFxuICAgICAgICAgIERldGFpbHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgVGFyZ2V0OiB7XG4gICAgICAgICAgICAgICAgQXR0cmlidXRlOiAnUHJvcGVydGllcycsXG4gICAgICAgICAgICAgICAgTmFtZTogJ0ZpZm9RdWV1ZScsXG4gICAgICAgICAgICAgICAgUmVxdWlyZXNSZWNyZWF0aW9uOiAnQWx3YXlzJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgRXZhbHVhdGlvbjogJ1N0YXRpYycsXG4gICAgICAgICAgICAgIENoYW5nZVNvdXJjZTogJ0RpcmVjdE1vZGlmaWNhdGlvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0gOiBbXSxcbiAgfSk7XG59XG4iXX0=